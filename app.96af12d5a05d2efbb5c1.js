!function(Q){var n={};function F(B){if(n[B])return n[B].exports;var t=n[B]={i:B,l:!1,exports:{}};return Q[B].call(t.exports,t,t.exports,F),t.l=!0,t.exports}F.m=Q,F.c=n,F.d=function(Q,n,B){F.o(Q,n)||Object.defineProperty(Q,n,{enumerable:!0,get:B})},F.r=function(Q){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(Q,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(Q,"__esModule",{value:!0})},F.t=function(Q,n){if(1&n&&(Q=F(Q)),8&n)return Q;if(4&n&&"object"==typeof Q&&Q&&Q.__esModule)return Q;var B=Object.create(null);if(F.r(B),Object.defineProperty(B,"default",{enumerable:!0,value:Q}),2&n&&"string"!=typeof Q)for(var t in Q)F.d(B,t,function(n){return Q[n]}.bind(null,t));return B},F.n=function(Q){var n=Q&&Q.__esModule?function(){return Q.default}:function(){return Q};return F.d(n,"a",n),n},F.o=function(Q,n){return Object.prototype.hasOwnProperty.call(Q,n)},F.p="",F(F.s=0)}([function(module,__webpack_exports__,__webpack_require__){"use strict";eval("// ESM COMPAT FLAG\n__webpack_require__.r(__webpack_exports__);\n\n// CONCATENATED MODULE: ./src/styles/index.scss\n// extracted by mini-css-extract-plugin\n\n// CONCATENATED MODULE: ./src/scripts/utils/keys.js\nconst KEY_CODE = {\n  TAB: 9,\n  ESC: 27,\n  END: 35,\n  HOME: 36,\n  LEFT: 37,\n  UP: 38,\n  RIGHT: 39,\n  DOWN: 40\n};\n// CONCATENATED MODULE: ./src/scripts/tabs.js\n\nconst SELECTOR_TAB = '[role=\"tab\"]';\nconst SELECTOR_TABS_CONTAINER = '.tabs';\nconst SELECTOR_TAB_PANEL = '[role=\"tabpanel\"]';\nconst SELECTOR_TAB_LIST = '[role=\"tablist\"]';\nconst CLASS_TAB_ACTIVE = 'active';\n\nconst Tabs = tabContainer => {\n  let tablist = tabContainer.querySelectorAll(SELECTOR_TAB_LIST)[0];\n  let tabs = tabContainer.querySelectorAll(SELECTOR_TAB);\n  let panels = tabContainer.querySelectorAll(SELECTOR_TAB_PANEL);\n  let isVerticalOrientation = tablist.getAttribute('aria-orientation') === 'vertical'; // Bind listeners\n\n  for (let i = 0; i < tabs.length; ++i) {\n    addListeners(i);\n  }\n\n  function addListeners(index) {\n    tabs[index].addEventListener('click', clickEventListener);\n    tabs[index].addEventListener('keydown', keydownEventListener);\n    tabs[index].addEventListener('keyup', keyupEventListener);\n    tabs[index].index = index;\n  } // When a tab is clicked, activateTab is fired to activate it\n\n\n  function clickEventListener(event) {\n    let tab = event.target;\n    activateTab(tab, false);\n  } // Handle keydown on tabs\n\n\n  function keydownEventListener(event) {\n    switch (event.keyCode) {\n      case KEY_CODE.END:\n        event.preventDefault();\n        activateTab(tabs[tabs.length - 1]);\n        break;\n\n      case KEY_CODE.HOME:\n        event.preventDefault();\n        activateTab(tabs[0]);\n        break;\n      // Up and down are in keydown\n      // because we need to prevent page scroll >:)\n\n      case KEY_CODE.UP:\n      case KEY_CODE.DOWN:\n        determineOrientation(event);\n        break;\n    }\n  } // Handle keyup on tabs\n\n\n  function keyupEventListener(event) {\n    switch (event.keyCode) {\n      case KEY_CODE.LEFT:\n      case KEY_CODE.RIGHT:\n        determineOrientation(event);\n        break;\n    }\n  } // When a tablistâ€™s aria-orientation is set to vertical,\n  // only up and down arrow should function.\n  // In all other cases only left and right arrow function.\n\n\n  function determineOrientation(event) {\n    let key = event.keyCode;\n\n    if (isVerticalOrientation && (key === KEY_CODE.UP || key === KEY_CODE.DOWN)) {\n      event.preventDefault();\n      switchTabOnArrowPress(event);\n    } else if (!isVerticalOrientation && (key === KEY_CODE.LEFT || key === KEY_CODE.RIGHT)) {\n      switchTabOnArrowPress(event);\n    }\n  } // Either focus the next, previous, first, or last tab\n  // depening on key pressed\n\n\n  function switchTabOnArrowPress(event) {\n    const pressed = event.keyCode;\n    const target = event.target;\n\n    for (let x = 0; x < tabs.length; x++) {\n      tabs[x].addEventListener('focus', focusEventHandler);\n    }\n\n    const direction = pressed === KEY_CODE.UP || pressed === KEY_CODE.LEFT ? -1 : pressed === KEY_CODE.DOWN || pressed === KEY_CODE.RIGHT ? 1 : 0;\n\n    if (direction !== 0 && target.index !== undefined) {\n      const newIndex = target.index + direction;\n      const activeIndex = newIndex < 0 ? tabs.length - 1 : newIndex < tabs.length ? newIndex : 0;\n      tabs[activeIndex].focus();\n    }\n  } // Activates any given tab panel\n\n\n  function activateTab(tab, setFocus) {\n    setFocus = setFocus || true; // Deactivate all other tabs\n\n    deactivateTabs();\n    tab.removeAttribute('tabindex');\n    tab.setAttribute('aria-selected', 'true');\n    tab.classList.add(CLASS_TAB_ACTIVE);\n    const panelId = tab.getAttribute('aria-controls');\n    document.getElementById(panelId).removeAttribute('hidden'); // Set focus when required\n\n    if (setFocus) {\n      tab.focus();\n    }\n  } // Deactivate all tabs and tab panels\n\n\n  function deactivateTabs() {\n    [...tabs].forEach(tab => {\n      tab.setAttribute('tabindex', '-1');\n      tab.setAttribute('aria-selected', 'false');\n      tab.classList.remove(CLASS_TAB_ACTIVE);\n      tab.removeEventListener('focus', focusEventHandler);\n    });\n    [...panels].forEach(panel => {\n      panel.setAttribute('hidden', 'hidden');\n    });\n  }\n\n  function focusEventHandler(event) {\n    let target = event.target;\n    activateTab(target, false);\n  }\n};\n\nconst initTabs = () => {\n  const tabs = document.querySelectorAll(SELECTOR_TABS_CONTAINER);\n  [...tabs].forEach(tabConatiner => {\n    Tabs(tabConatiner);\n  });\n};\n// CONCATENATED MODULE: ./node_modules/tabbable/dist/index.esm.js\n/*!\n* tabbable 5.1.2\n* @license MIT, https://github.com/focus-trap/tabbable/blob/master/LICENSE\n*/\nvar candidateSelectors = ['input', 'select', 'textarea', 'a[href]', 'button', '[tabindex]', 'audio[controls]', 'video[controls]', '[contenteditable]:not([contenteditable=\"false\"])', 'details>summary'];\nvar candidateSelector = /* #__PURE__ */candidateSelectors.join(',');\nvar matches = typeof Element === 'undefined' ? function () {} : Element.prototype.matches || Element.prototype.msMatchesSelector || Element.prototype.webkitMatchesSelector;\n\nfunction tabbable(el, options) {\n  options = options || {};\n  var regularTabbables = [];\n  var orderedTabbables = [];\n  var candidates = getCandidates(el, options.includeContainer, isNodeMatchingSelectorTabbable);\n  candidates.forEach(function (candidate, i) {\n    var candidateTabindex = getTabindex(candidate);\n\n    if (candidateTabindex === 0) {\n      regularTabbables.push(candidate);\n    } else {\n      orderedTabbables.push({\n        documentOrder: i,\n        tabIndex: candidateTabindex,\n        node: candidate\n      });\n    }\n  });\n  var tabbableNodes = orderedTabbables.sort(sortOrderedTabbables).map(function (a) {\n    return a.node;\n  }).concat(regularTabbables);\n  return tabbableNodes;\n}\n\nfunction focusable(el, options) {\n  options = options || {};\n  var candidates = getCandidates(el, options.includeContainer, isNodeMatchingSelectorFocusable);\n  return candidates;\n}\n\nfunction getCandidates(el, includeContainer, filter) {\n  var candidates = Array.prototype.slice.apply(el.querySelectorAll(candidateSelector));\n\n  if (includeContainer && matches.call(el, candidateSelector)) {\n    candidates.unshift(el);\n  }\n\n  candidates = candidates.filter(filter);\n  return candidates;\n}\n\nfunction isNodeMatchingSelectorTabbable(node) {\n  if (!isNodeMatchingSelectorFocusable(node) || isNonTabbableRadio(node) || getTabindex(node) < 0) {\n    return false;\n  }\n\n  return true;\n}\n\nfunction isTabbable(node) {\n  if (!node) {\n    throw new Error('No node provided');\n  }\n\n  if (matches.call(node, candidateSelector) === false) {\n    return false;\n  }\n\n  return isNodeMatchingSelectorTabbable(node);\n}\n\nfunction isNodeMatchingSelectorFocusable(node) {\n  if (node.disabled || isHiddenInput(node) || isHidden(node)) {\n    return false;\n  }\n\n  return true;\n}\n\nvar focusableCandidateSelector = /* #__PURE__ */candidateSelectors.concat('iframe').join(',');\n\nfunction isFocusable(node) {\n  if (!node) {\n    throw new Error('No node provided');\n  }\n\n  if (matches.call(node, focusableCandidateSelector) === false) {\n    return false;\n  }\n\n  return isNodeMatchingSelectorFocusable(node);\n}\n\nfunction getTabindex(node) {\n  var tabindexAttr = parseInt(node.getAttribute('tabindex'), 10);\n\n  if (!isNaN(tabindexAttr)) {\n    return tabindexAttr;\n  } // Browsers do not return `tabIndex` correctly for contentEditable nodes;\n  // so if they don't have a tabindex attribute specifically set, assume it's 0.\n\n\n  if (isContentEditable(node)) {\n    return 0;\n  } // in Chrome, <audio controls/> and <video controls/> elements get a default\n  //  `tabIndex` of -1 when the 'tabindex' attribute isn't specified in the DOM,\n  //  yet they are still part of the regular tab order; in FF, they get a default\n  //  `tabIndex` of 0; since Chrome still puts those elements in the regular tab\n  //  order, consider their tab index to be 0\n\n\n  if ((node.nodeName === 'AUDIO' || node.nodeName === 'VIDEO') && node.getAttribute('tabindex') === null) {\n    return 0;\n  }\n\n  return node.tabIndex;\n}\n\nfunction sortOrderedTabbables(a, b) {\n  return a.tabIndex === b.tabIndex ? a.documentOrder - b.documentOrder : a.tabIndex - b.tabIndex;\n}\n\nfunction isContentEditable(node) {\n  return node.contentEditable === 'true';\n}\n\nfunction isInput(node) {\n  return node.tagName === 'INPUT';\n}\n\nfunction isHiddenInput(node) {\n  return isInput(node) && node.type === 'hidden';\n}\n\nfunction isRadio(node) {\n  return isInput(node) && node.type === 'radio';\n}\n\nfunction isNonTabbableRadio(node) {\n  return isRadio(node) && !isTabbableRadio(node);\n}\n\nfunction getCheckedRadio(nodes, form) {\n  for (var i = 0; i < nodes.length; i++) {\n    if (nodes[i].checked && nodes[i].form === form) {\n      return nodes[i];\n    }\n  }\n}\n\nfunction isTabbableRadio(node) {\n  if (!node.name) {\n    return true;\n  }\n\n  var radioScope = node.form || node.ownerDocument;\n  var radioSet = radioScope.querySelectorAll('input[type=\"radio\"][name=\"' + node.name + '\"]');\n  var checked = getCheckedRadio(radioSet, node.form);\n  return !checked || checked === node;\n}\n\nfunction isHidden(node) {\n  if (getComputedStyle(node).visibility === 'hidden') return true;\n\n  while (node) {\n    if (getComputedStyle(node).display === 'none') return true;\n    node = node.parentElement;\n  }\n\n  return false;\n}\n\n\n//# sourceMappingURL=index.esm.js.map\n\n// CONCATENATED MODULE: ./node_modules/focus-trap/dist/focus-trap.esm.js\n/*!\n* focus-trap 6.1.3\n* @license MIT, https://github.com/focus-trap/focus-trap/blob/master/LICENSE\n*/\n\n\nfunction _defineProperty(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n}\n\nfunction ownKeys(object, enumerableOnly) {\n  var keys = Object.keys(object);\n\n  if (Object.getOwnPropertySymbols) {\n    var symbols = Object.getOwnPropertySymbols(object);\n    if (enumerableOnly) symbols = symbols.filter(function (sym) {\n      return Object.getOwnPropertyDescriptor(object, sym).enumerable;\n    });\n    keys.push.apply(keys, symbols);\n  }\n\n  return keys;\n}\n\nfunction _objectSpread2(target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i] != null ? arguments[i] : {};\n\n    if (i % 2) {\n      ownKeys(Object(source), true).forEach(function (key) {\n        _defineProperty(target, key, source[key]);\n      });\n    } else if (Object.getOwnPropertyDescriptors) {\n      Object.defineProperties(target, Object.getOwnPropertyDescriptors(source));\n    } else {\n      ownKeys(Object(source)).forEach(function (key) {\n        Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key));\n      });\n    }\n  }\n\n  return target;\n}\n\nvar activeFocusDelay;\n\nvar activeFocusTraps = function () {\n  var trapQueue = [];\n  return {\n    activateTrap: function activateTrap(trap) {\n      if (trapQueue.length > 0) {\n        var activeTrap = trapQueue[trapQueue.length - 1];\n\n        if (activeTrap !== trap) {\n          activeTrap.pause();\n        }\n      }\n\n      var trapIndex = trapQueue.indexOf(trap);\n\n      if (trapIndex === -1) {\n        trapQueue.push(trap);\n      } else {\n        // move this existing trap to the front of the queue\n        trapQueue.splice(trapIndex, 1);\n        trapQueue.push(trap);\n      }\n    },\n    deactivateTrap: function deactivateTrap(trap) {\n      var trapIndex = trapQueue.indexOf(trap);\n\n      if (trapIndex !== -1) {\n        trapQueue.splice(trapIndex, 1);\n      }\n\n      if (trapQueue.length > 0) {\n        trapQueue[trapQueue.length - 1].unpause();\n      }\n    }\n  };\n}();\n\nfunction createFocusTrap(element, userOptions) {\n  var doc = document;\n  var container = typeof element === 'string' ? doc.querySelector(element) : element;\n\n  var config = _objectSpread2({\n    returnFocusOnDeactivate: true,\n    escapeDeactivates: true,\n    delayInitialFocus: true\n  }, userOptions);\n\n  var state = {\n    firstTabbableNode: null,\n    lastTabbableNode: null,\n    nodeFocusedBeforeActivation: null,\n    mostRecentlyFocusedNode: null,\n    active: false,\n    paused: false\n  };\n  var trap = {\n    activate: activate,\n    deactivate: deactivate,\n    pause: pause,\n    unpause: unpause\n  };\n  return trap;\n\n  function activate(activateOptions) {\n    if (state.active) return;\n    updateTabbableNodes();\n    state.active = true;\n    state.paused = false;\n    state.nodeFocusedBeforeActivation = doc.activeElement;\n    var onActivate = activateOptions && activateOptions.onActivate ? activateOptions.onActivate : config.onActivate;\n\n    if (onActivate) {\n      onActivate();\n    }\n\n    addListeners();\n    return trap;\n  }\n\n  function deactivate(deactivateOptions) {\n    if (!state.active) return;\n    clearTimeout(activeFocusDelay);\n    removeListeners();\n    state.active = false;\n    state.paused = false;\n    activeFocusTraps.deactivateTrap(trap);\n    var onDeactivate = deactivateOptions && deactivateOptions.onDeactivate !== undefined ? deactivateOptions.onDeactivate : config.onDeactivate;\n\n    if (onDeactivate) {\n      onDeactivate();\n    }\n\n    var returnFocus = deactivateOptions && deactivateOptions.returnFocus !== undefined ? deactivateOptions.returnFocus : config.returnFocusOnDeactivate;\n\n    if (returnFocus) {\n      delay(function () {\n        tryFocus(getReturnFocusNode(state.nodeFocusedBeforeActivation));\n      });\n    }\n\n    return trap;\n  }\n\n  function pause() {\n    if (state.paused || !state.active) return;\n    state.paused = true;\n    removeListeners();\n  }\n\n  function unpause() {\n    if (!state.paused || !state.active) return;\n    state.paused = false;\n    updateTabbableNodes();\n    addListeners();\n  }\n\n  function addListeners() {\n    if (!state.active) return; // There can be only one listening focus trap at a time\n\n    activeFocusTraps.activateTrap(trap); // Delay ensures that the focused element doesn't capture the event\n    // that caused the focus trap activation.\n\n    activeFocusDelay = config.delayInitialFocus ? delay(function () {\n      tryFocus(getInitialFocusNode());\n    }) : tryFocus(getInitialFocusNode());\n    doc.addEventListener('focusin', checkFocusIn, true);\n    doc.addEventListener('mousedown', checkPointerDown, {\n      capture: true,\n      passive: false\n    });\n    doc.addEventListener('touchstart', checkPointerDown, {\n      capture: true,\n      passive: false\n    });\n    doc.addEventListener('click', checkClick, {\n      capture: true,\n      passive: false\n    });\n    doc.addEventListener('keydown', checkKey, {\n      capture: true,\n      passive: false\n    });\n    return trap;\n  }\n\n  function removeListeners() {\n    if (!state.active) return;\n    doc.removeEventListener('focusin', checkFocusIn, true);\n    doc.removeEventListener('mousedown', checkPointerDown, true);\n    doc.removeEventListener('touchstart', checkPointerDown, true);\n    doc.removeEventListener('click', checkClick, true);\n    doc.removeEventListener('keydown', checkKey, true);\n    return trap;\n  }\n\n  function getNodeForOption(optionName) {\n    var optionValue = config[optionName];\n    var node = optionValue;\n\n    if (!optionValue) {\n      return null;\n    }\n\n    if (typeof optionValue === 'string') {\n      node = doc.querySelector(optionValue);\n\n      if (!node) {\n        throw new Error('`' + optionName + '` refers to no known node');\n      }\n    }\n\n    if (typeof optionValue === 'function') {\n      node = optionValue();\n\n      if (!node) {\n        throw new Error('`' + optionName + '` did not return a node');\n      }\n    }\n\n    return node;\n  }\n\n  function getInitialFocusNode() {\n    var node;\n\n    if (getNodeForOption('initialFocus') !== null) {\n      node = getNodeForOption('initialFocus');\n    } else if (container.contains(doc.activeElement)) {\n      node = doc.activeElement;\n    } else {\n      node = state.firstTabbableNode || getNodeForOption('fallbackFocus');\n    }\n\n    if (!node) {\n      throw new Error('Your focus-trap needs to have at least one focusable element');\n    }\n\n    return node;\n  }\n\n  function getReturnFocusNode(previousActiveElement) {\n    var node = getNodeForOption('setReturnFocus');\n    return node ? node : previousActiveElement;\n  } // This needs to be done on mousedown and touchstart instead of click\n  // so that it precedes the focus event.\n\n\n  function checkPointerDown(e) {\n    if (container.contains(e.target)) {\n      // allow the click since it ocurred inside the trap\n      return;\n    }\n\n    if (config.clickOutsideDeactivates) {\n      // immediately deactivate the trap\n      deactivate({\n        // if, on deactivation, we should return focus to the node originally-focused\n        //  when the trap was activated (or the configured `setReturnFocus` node),\n        //  then assume it's also OK to return focus to the outside node that was\n        //  just clicked, causing deactivation, as long as that node is focusable;\n        //  if it isn't focusable, then return focus to the original node focused\n        //  on activation (or the configured `setReturnFocus` node)\n        // NOTE: by setting `returnFocus: false`, deactivate() will do nothing,\n        //  which will result in the outside click setting focus to the node\n        //  that was clicked, whether it's focusable or not; by setting\n        //  `returnFocus: true`, we'll attempt to re-focus the node originally-focused\n        //  on activation (or the configured `setReturnFocus` node)\n        returnFocus: config.returnFocusOnDeactivate && !isFocusable(e.target)\n      });\n      return;\n    } // This is needed for mobile devices.\n    // (If we'll only let `click` events through,\n    // then on mobile they will be blocked anyways if `touchstart` is blocked.)\n\n\n    if (config.allowOutsideClick && (typeof config.allowOutsideClick === 'boolean' ? config.allowOutsideClick : config.allowOutsideClick(e))) {\n      // allow the click outside the trap to take place\n      return;\n    } // otherwise, prevent the click\n\n\n    e.preventDefault();\n  } // In case focus escapes the trap for some strange reason, pull it back in.\n\n\n  function checkFocusIn(e) {\n    // In Firefox when you Tab out of an iframe the Document is briefly focused.\n    if (container.contains(e.target) || e.target instanceof Document) {\n      return;\n    }\n\n    e.stopImmediatePropagation();\n    tryFocus(state.mostRecentlyFocusedNode || getInitialFocusNode());\n  }\n\n  function checkKey(e) {\n    if (config.escapeDeactivates !== false && isEscapeEvent(e)) {\n      e.preventDefault();\n      deactivate();\n      return;\n    }\n\n    if (isTabEvent(e)) {\n      checkTab(e);\n      return;\n    }\n  } // Hijack Tab events on the first and last focusable nodes of the trap,\n  // in order to prevent focus from escaping. If it escapes for even a\n  // moment it can end up scrolling the page and causing confusion so we\n  // kind of need to capture the action at the keydown phase.\n\n\n  function checkTab(e) {\n    updateTabbableNodes();\n\n    if (e.shiftKey && e.target === state.firstTabbableNode) {\n      e.preventDefault();\n      tryFocus(state.lastTabbableNode);\n      return;\n    }\n\n    if (!e.shiftKey && e.target === state.lastTabbableNode) {\n      e.preventDefault();\n      tryFocus(state.firstTabbableNode);\n      return;\n    }\n  }\n\n  function checkClick(e) {\n    if (config.clickOutsideDeactivates) return;\n    if (container.contains(e.target)) return;\n\n    if (config.allowOutsideClick && (typeof config.allowOutsideClick === 'boolean' ? config.allowOutsideClick : config.allowOutsideClick(e))) {\n      return;\n    }\n\n    e.preventDefault();\n    e.stopImmediatePropagation();\n  }\n\n  function updateTabbableNodes() {\n    var tabbableNodes = tabbable(container);\n    state.firstTabbableNode = tabbableNodes[0] || getInitialFocusNode();\n    state.lastTabbableNode = tabbableNodes[tabbableNodes.length - 1] || getInitialFocusNode();\n  }\n\n  function tryFocus(node) {\n    if (node === doc.activeElement) return;\n\n    if (!node || !node.focus) {\n      tryFocus(getInitialFocusNode());\n      return;\n    }\n\n    node.focus({\n      preventScroll: !!config.preventScroll\n    });\n    state.mostRecentlyFocusedNode = node;\n\n    if (isSelectableInput(node)) {\n      node.select();\n    }\n  }\n}\n\nfunction isSelectableInput(node) {\n  return node.tagName && node.tagName.toLowerCase() === 'input' && typeof node.select === 'function';\n}\n\nfunction isEscapeEvent(e) {\n  return e.key === 'Escape' || e.key === 'Esc' || e.keyCode === 27;\n}\n\nfunction isTabEvent(e) {\n  return e.key === 'Tab' || e.keyCode === 9;\n}\n\nfunction delay(fn) {\n  return setTimeout(fn, 0);\n}\n\n\n//# sourceMappingURL=focus-trap.esm.js.map\n\n// CONCATENATED MODULE: ./src/scripts/utils/focus.js\nconst setFocusOnFirstDescendant = element => {\n  for (let i = 0; i < element.childNodes.length; i++) {\n    const child = element.childNodes[i];\n\n    if (tryToSetFocus(child) || setFocusOnFirstDescendant(child)) {\n      return true;\n    }\n  }\n\n  return false;\n};\nconst setFocusOnLastDescendant = element => {\n  for (let i = element.childNodes.length - 1; i >= 0; i--) {\n    let child = element.childNodes[i];\n\n    if (tryToSetFocus(child) || setFocusOnLastDescendant(child)) {\n      return true;\n    }\n  }\n\n  return false;\n};\nconst tryToSetFocus = function (element) {\n  if (!focus_isFocusable(element)) {\n    return false;\n  }\n\n  try {\n    element.focus();\n  } catch (e) {}\n\n  return document.activeElement === element;\n};\nconst focus_isFocusable = function (element) {\n  if (element.tabIndex > 0 || element.tabIndex === 0 && element.getAttribute('tabIndex') !== null) {\n    return true;\n  }\n\n  if (element.disabled) {\n    return false;\n  }\n\n  switch (element.nodeName) {\n    case 'A':\n      return !!element.href && element.rel != 'ignore';\n\n    case 'INPUT':\n      return element.type != 'hidden' && element.type != 'file';\n\n    case 'BUTTON':\n    case 'SELECT':\n    case 'TEXTAREA':\n      return true;\n\n    default:\n      return false;\n  }\n};\n// CONCATENATED MODULE: ./src/scripts/modal.js\n\n\n\nconst BODY_OPEN_CLASS = 'has-modal';\nconst MODAL_OPEN_CLASS = 'modal--open';\nconst DATA_MODAL_TOGGLE = 'data-toggle-modal';\nconst DATA_MODAL_CLOSE = 'data-close-modal';\nconst EVENT_CLOSE = 'modal.close';\nconst EVENT_OPEN = 'modal.open';\nlet activeModal = null; // this.eventClose = new Event(EVENT_CLOSE);\n// this.eventOpen = new Event(EVENT_OPEN);\n\nclass modal_Modal {\n  constructor(modalID, toggles) {\n    this.modal = document.getElementById(modalID);\n    this.focusTrap = createFocusTrap(this.modal);\n\n    if (toggles && toggles.length > 0) {\n      this.initToggles(toggles);\n    }\n\n    this.eventClose = new Event(EVENT_CLOSE);\n    this.eventOpen = new Event(EVENT_OPEN);\n  }\n\n  initToggles(toggles) {\n    [...toggles].filter(Boolean).forEach(toggle => {\n      toggle.addEventListener('click', event => this.showModal(event));\n    });\n  }\n\n  showModal(event) {\n    activeModal = this;\n    this.activeElement = document.activeElement;\n    this.modal.classList.add(MODAL_OPEN_CLASS);\n    document.body.classList.add(BODY_OPEN_CLASS);\n    setFocusOnFirstDescendant(this.modal);\n    this.focusTrap.activate();\n    this.hideAllContentForScreenReaders();\n    this.addEventListeners();\n    this.modal.dispatchEvent(this.eventOpen);\n  }\n\n  closeModal(event) {\n    activeModal.removeEventListeners();\n    document.body.classList.remove(BODY_OPEN_CLASS);\n    activeModal.modal.classList.remove(MODAL_OPEN_CLASS);\n    activeModal.focusTrap.deactivate();\n    this.showAllContentForScreenReaders();\n\n    if (activeModal.activeElement && activeModal.activeElement.focus) {\n      activeModal.activeElement.focus();\n    }\n\n    activeModal.modal.dispatchEvent(activeModal.eventClose);\n    activeModal = null;\n  }\n\n  addEventListeners() {\n    this.modal.addEventListener('touchstart', this.handleModalClick);\n    this.modal.addEventListener('click', this.handleModalClick);\n    document.addEventListener('keyup', this.handleDocumentKeyUpEvent);\n  }\n\n  removeEventListeners() {\n    this.modal.removeEventListener('touchstart', this.handleModalClick);\n    this.modal.removeEventListener('click', this.handleModalClick);\n    document.removeEventListener('keydown', this.handleDocumentKeyUpEvent);\n  }\n\n  handleDocumentKeyUpEvent(event) {\n    if (event.keyCode === KEY_CODE.ESC) {\n      event.stopPropagation();\n      activeModal.closeModal(event);\n    }\n  }\n\n  handleModalClick(event) {\n    const closeAttr = `[${DATA_MODAL_CLOSE}]`;\n\n    if (event.target.hasAttribute(closeAttr) || event.target.closest(closeAttr)) {\n      activeModal.closeModal(event);\n    }\n  }\n\n  hideAllContentForScreenReaders() {\n    [...document.body.children].forEach(child => {\n      if (child !== this.modal) {\n        child.setAttribute('aria-hidden', true);\n      }\n    });\n  }\n\n  showAllContentForScreenReaders() {\n    [...document.body.children].forEach(child => {\n      if (child !== this.modal) {\n        child.removeAttribute('aria-hidden');\n      }\n    });\n  }\n\n}\n\nconst generateModalsTogglesMap = toggles => {\n  const map = [];\n  toggles.forEach(toggle => {\n    const modalID = toggle.getAttribute(DATA_MODAL_TOGGLE);\n    if (map[modalID] === undefined) map[modalID] = [];\n    map[modalID].push(toggle);\n  });\n  return map;\n};\n\nconst initModals = () => {\n  const toggles = document.querySelectorAll(`[${DATA_MODAL_TOGGLE}]`);\n  const modalsTogglesMap = generateModalsTogglesMap(toggles);\n  Object.keys(modalsTogglesMap).forEach(modalID => {\n    const toggles = modalsTogglesMap[modalID];\n    new modal_Modal(modalID, toggles);\n  });\n};\n// CONCATENATED MODULE: ./src/scripts/forms.js\nconst SELECTOR_INPUT_WRAPPER = '.form-field';\nconst SELECTOR_INPUT = '.form-field__input';\nconst SELECTOR_ERROR = '.form-field__error';\nconst CLASS_LABEL_ABOVE = 'form-field__label--above';\nconst CLASS_INVALID = 'form-field--invalid';\nconst ID_ERROR_ALERT = 'loginFormErorr';\n\nfunction handleInputChangeEvent(event) {\n  const target = event.target;\n  changeFloatLabelState(target);\n}\n\nfunction changeFloatLabelState(input) {\n  const label = input.labels ? input.labels[0] : null;\n\n  if (label) {\n    const isLabelAbove = input.value || input === document.activeElement;\n    isLabelAbove ? label.classList.add(CLASS_LABEL_ABOVE) : label.classList.remove(CLASS_LABEL_ABOVE);\n  }\n}\n\nfunction validateRequiredInput(input) {\n  if (!input.value) {\n    setInvalidState(input);\n    return false;\n  }\n\n  return true;\n}\n\nfunction setInvalidState(input) {\n  const wrapper = input.closest(SELECTOR_INPUT_WRAPPER);\n  const error = wrapper.querySelectorAll(SELECTOR_ERROR)[0];\n  wrapper.classList.add(CLASS_INVALID);\n  error.removeAttribute('hidden');\n  input.setAttribute('aria-describedby', error.id);\n  input.setAttribute('aria-invalid', true);\n}\n\nfunction resetInvalidState(input) {\n  const wrapper = input.closest(SELECTOR_INPUT_WRAPPER);\n  const error = wrapper.querySelectorAll(SELECTOR_ERROR)[0];\n  wrapper.classList.remove(CLASS_INVALID);\n  error.setAttribute('hidden', 'hidden');\n  input.removeAttribute('aria-describedby');\n  input.removeAttribute('aria-invalid');\n}\n\nfunction initInputs() {\n  const inputs = document.querySelectorAll(SELECTOR_INPUT);\n  [...inputs].forEach(input => {\n    input.addEventListener('change', handleInputChangeEvent);\n  });\n}\n\nfunction initLoginForm() {\n  const loginModal = document.getElementById('loginModal');\n  const loginForm = document.getElementById('loginForm');\n  const inputs = loginForm.querySelectorAll(SELECTOR_INPUT);\n\n  function addEventListeners() {\n    loginModal.addEventListener('modal.close', e => resetFormInvalidState());\n    loginForm.addEventListener('submit', submitForm);\n    [...inputs].forEach(input => {\n      input.addEventListener('keyup', e => {\n        e.target.value && resetInvalidState(e.target);\n      });\n    });\n  }\n\n  function submitForm(event) {\n    removeErrorAlert();\n    const isFormValid = validateForm();\n\n    if (isFormValid) {\n      loginModal.querySelector('[data-close-modal]').click();\n    } else {\n      event.preventDefault();\n      const invalidFields = loginForm.querySelectorAll('[aria-invalid]');\n      createErrorAlert(invalidFields.length); // invalidFields[0].focus();\n    }\n  }\n\n  function validateForm() {\n    let isFormValid = true;\n    [...inputs].forEach(input => {\n      const isValid = validateRequiredInput(input);\n      !isValid && (isFormValid = false);\n    });\n    return isFormValid;\n  }\n\n  function createErrorAlert(numOfInvalidFields) {\n    if (!document.getElementById(ID_ERROR_ALERT)) {\n      const alert = document.createElement('div');\n      alert.setAttribute('id', ID_ERROR_ALERT);\n      alert.setAttribute('role', 'alert');\n      alert.setAttribute('tabIndex', '-1');\n      alert.classList.add('visually-hidden');\n      alert.innerHTML = `Форма не была отправлена. Найдено ${numOfInvalidFields} ошибок.`;\n      loginForm.appendChild(alert);\n    }\n  }\n\n  function removeErrorAlert() {\n    const alert = document.getElementById(ID_ERROR_ALERT);\n\n    if (alert) {\n      alert.remove();\n    }\n  }\n\n  function resetFormInvalidState() {\n    [...inputs].forEach(input => {\n      resetInvalidState(input);\n    });\n    removeErrorAlert();\n  }\n\n  addEventListeners();\n}\n\nconst initForms = () => {\n  initInputs();\n  initLoginForm();\n};\n// CONCATENATED MODULE: ./src/scripts/app.js\n\n\n\n\nclass app_App {\n  constructor() {}\n\n  init() {\n    initModals();\n    initTabs();\n    initForms();\n  }\n\n}\n\nconst app = new app_App();\ndocument.addEventListener('DOMContentLoaded', () => app.init());\n// CONCATENATED MODULE: ./src/index.js\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9zcmMvc3R5bGVzL2luZGV4LnNjc3M/NDgwMSIsIndlYnBhY2s6Ly8vLi9zcmMvc2NyaXB0cy91dGlscy9rZXlzLmpzPzA1OWQiLCJ3ZWJwYWNrOi8vLy4vc3JjL3NjcmlwdHMvdGFicy5qcz9jYzAzIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy90YWJiYWJsZS9kaXN0L2luZGV4LmVzbS5qcz82MmY3Iiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9mb2N1cy10cmFwL2Rpc3QvZm9jdXMtdHJhcC5lc20uanM/ZTE2YyIsIndlYnBhY2s6Ly8vLi9zcmMvc2NyaXB0cy91dGlscy9mb2N1cy5qcz9mNTk4Iiwid2VicGFjazovLy8uL3NyYy9zY3JpcHRzL21vZGFsLmpzP2EwZWEiLCJ3ZWJwYWNrOi8vLy4vc3JjL3NjcmlwdHMvZm9ybXMuanM/YjM5MCIsIndlYnBhY2s6Ly8vLi9zcmMvc2NyaXB0cy9hcHAuanM/Y2U0ZCIsIndlYnBhY2s6Ly8vLi9zcmMvaW5kZXguanM/YjYzNSJdLCJuYW1lcyI6WyJLRVlfQ09ERSIsIlRBQiIsIkVTQyIsIkVORCIsIkhPTUUiLCJMRUZUIiwiVVAiLCJSSUdIVCIsIkRPV04iLCJTRUxFQ1RPUl9UQUIiLCJTRUxFQ1RPUl9UQUJTX0NPTlRBSU5FUiIsIlNFTEVDVE9SX1RBQl9QQU5FTCIsIlNFTEVDVE9SX1RBQl9MSVNUIiwiQ0xBU1NfVEFCX0FDVElWRSIsIlRhYnMiLCJ0YWJDb250YWluZXIiLCJ0YWJsaXN0IiwicXVlcnlTZWxlY3RvckFsbCIsInRhYnMiLCJwYW5lbHMiLCJpc1ZlcnRpY2FsT3JpZW50YXRpb24iLCJnZXRBdHRyaWJ1dGUiLCJpIiwibGVuZ3RoIiwiYWRkTGlzdGVuZXJzIiwiaW5kZXgiLCJhZGRFdmVudExpc3RlbmVyIiwiY2xpY2tFdmVudExpc3RlbmVyIiwia2V5ZG93bkV2ZW50TGlzdGVuZXIiLCJrZXl1cEV2ZW50TGlzdGVuZXIiLCJldmVudCIsInRhYiIsInRhcmdldCIsImFjdGl2YXRlVGFiIiwia2V5Q29kZSIsInByZXZlbnREZWZhdWx0IiwiZGV0ZXJtaW5lT3JpZW50YXRpb24iLCJrZXkiLCJzd2l0Y2hUYWJPbkFycm93UHJlc3MiLCJwcmVzc2VkIiwieCIsImZvY3VzRXZlbnRIYW5kbGVyIiwiZGlyZWN0aW9uIiwidW5kZWZpbmVkIiwibmV3SW5kZXgiLCJhY3RpdmVJbmRleCIsImZvY3VzIiwic2V0Rm9jdXMiLCJkZWFjdGl2YXRlVGFicyIsInJlbW92ZUF0dHJpYnV0ZSIsInNldEF0dHJpYnV0ZSIsImNsYXNzTGlzdCIsImFkZCIsInBhbmVsSWQiLCJkb2N1bWVudCIsImdldEVsZW1lbnRCeUlkIiwiZm9yRWFjaCIsInJlbW92ZSIsInJlbW92ZUV2ZW50TGlzdGVuZXIiLCJwYW5lbCIsImluaXRUYWJzIiwidGFiQ29uYXRpbmVyIiwic2V0Rm9jdXNPbkZpcnN0RGVzY2VuZGFudCIsImVsZW1lbnQiLCJjaGlsZE5vZGVzIiwiY2hpbGQiLCJ0cnlUb1NldEZvY3VzIiwic2V0Rm9jdXNPbkxhc3REZXNjZW5kYW50IiwiaXNGb2N1c2FibGUiLCJlIiwiYWN0aXZlRWxlbWVudCIsInRhYkluZGV4IiwiZGlzYWJsZWQiLCJub2RlTmFtZSIsImhyZWYiLCJyZWwiLCJ0eXBlIiwiQk9EWV9PUEVOX0NMQVNTIiwiTU9EQUxfT1BFTl9DTEFTUyIsIkRBVEFfTU9EQUxfVE9HR0xFIiwiREFUQV9NT0RBTF9DTE9TRSIsIkVWRU5UX0NMT1NFIiwiRVZFTlRfT1BFTiIsImFjdGl2ZU1vZGFsIiwiTW9kYWwiLCJjb25zdHJ1Y3RvciIsIm1vZGFsSUQiLCJ0b2dnbGVzIiwibW9kYWwiLCJmb2N1c1RyYXAiLCJjcmVhdGVGb2N1c1RyYXAiLCJpbml0VG9nZ2xlcyIsImV2ZW50Q2xvc2UiLCJFdmVudCIsImV2ZW50T3BlbiIsImZpbHRlciIsIkJvb2xlYW4iLCJ0b2dnbGUiLCJzaG93TW9kYWwiLCJib2R5IiwiYWN0aXZhdGUiLCJoaWRlQWxsQ29udGVudEZvclNjcmVlblJlYWRlcnMiLCJhZGRFdmVudExpc3RlbmVycyIsImRpc3BhdGNoRXZlbnQiLCJjbG9zZU1vZGFsIiwicmVtb3ZlRXZlbnRMaXN0ZW5lcnMiLCJkZWFjdGl2YXRlIiwic2hvd0FsbENvbnRlbnRGb3JTY3JlZW5SZWFkZXJzIiwiaGFuZGxlTW9kYWxDbGljayIsImhhbmRsZURvY3VtZW50S2V5VXBFdmVudCIsInN0b3BQcm9wYWdhdGlvbiIsImNsb3NlQXR0ciIsImhhc0F0dHJpYnV0ZSIsImNsb3Nlc3QiLCJjaGlsZHJlbiIsImdlbmVyYXRlTW9kYWxzVG9nZ2xlc01hcCIsIm1hcCIsInB1c2giLCJpbml0TW9kYWxzIiwibW9kYWxzVG9nZ2xlc01hcCIsIk9iamVjdCIsImtleXMiLCJTRUxFQ1RPUl9JTlBVVF9XUkFQUEVSIiwiU0VMRUNUT1JfSU5QVVQiLCJTRUxFQ1RPUl9FUlJPUiIsIkNMQVNTX0xBQkVMX0FCT1ZFIiwiQ0xBU1NfSU5WQUxJRCIsIklEX0VSUk9SX0FMRVJUIiwiaGFuZGxlSW5wdXRDaGFuZ2VFdmVudCIsImNoYW5nZUZsb2F0TGFiZWxTdGF0ZSIsImlucHV0IiwibGFiZWwiLCJsYWJlbHMiLCJpc0xhYmVsQWJvdmUiLCJ2YWx1ZSIsInZhbGlkYXRlUmVxdWlyZWRJbnB1dCIsInNldEludmFsaWRTdGF0ZSIsIndyYXBwZXIiLCJlcnJvciIsImlkIiwicmVzZXRJbnZhbGlkU3RhdGUiLCJpbml0SW5wdXRzIiwiaW5wdXRzIiwiaW5pdExvZ2luRm9ybSIsImxvZ2luTW9kYWwiLCJsb2dpbkZvcm0iLCJyZXNldEZvcm1JbnZhbGlkU3RhdGUiLCJzdWJtaXRGb3JtIiwicmVtb3ZlRXJyb3JBbGVydCIsImlzRm9ybVZhbGlkIiwidmFsaWRhdGVGb3JtIiwicXVlcnlTZWxlY3RvciIsImNsaWNrIiwiaW52YWxpZEZpZWxkcyIsImNyZWF0ZUVycm9yQWxlcnQiLCJpc1ZhbGlkIiwibnVtT2ZJbnZhbGlkRmllbGRzIiwiYWxlcnQiLCJjcmVhdGVFbGVtZW50IiwiaW5uZXJIVE1MIiwiYXBwZW5kQ2hpbGQiLCJpbml0Rm9ybXMiLCJBcHAiLCJpbml0IiwiYXBwIl0sIm1hcHBpbmdzIjoiOzs7O0FBQUE7OztBQ0FPLE1BQU1BLFFBQVEsR0FBRztBQUNwQkMsS0FBRyxFQUFFLENBRGU7QUFFcEJDLEtBQUcsRUFBRSxFQUZlO0FBR3BCQyxLQUFHLEVBQUUsRUFIZTtBQUlwQkMsTUFBSSxFQUFFLEVBSmM7QUFLcEJDLE1BQUksRUFBRSxFQUxjO0FBTXBCQyxJQUFFLEVBQUUsRUFOZ0I7QUFPcEJDLE9BQUssRUFBRSxFQVBhO0FBUXBCQyxNQUFJLEVBQUU7QUFSYyxDQUFqQixDOztBQ0FQO0FBRUEsTUFBTUMsWUFBWSxHQUFHLGNBQXJCO0FBQ0EsTUFBTUMsdUJBQXVCLEdBQUcsT0FBaEM7QUFDQSxNQUFNQyxrQkFBa0IsR0FBRyxtQkFBM0I7QUFDQSxNQUFNQyxpQkFBaUIsR0FBRyxrQkFBMUI7QUFDQSxNQUFNQyxnQkFBZ0IsR0FBRyxRQUF6Qjs7QUFFQSxNQUFNQyxJQUFJLEdBQUlDLFlBQUQsSUFBa0I7QUFDM0IsTUFBSUMsT0FBTyxHQUFHRCxZQUFZLENBQUNFLGdCQUFiLENBQThCTCxpQkFBOUIsRUFBaUQsQ0FBakQsQ0FBZDtBQUNBLE1BQUlNLElBQUksR0FBR0gsWUFBWSxDQUFDRSxnQkFBYixDQUE4QlIsWUFBOUIsQ0FBWDtBQUNBLE1BQUlVLE1BQU0sR0FBR0osWUFBWSxDQUFDRSxnQkFBYixDQUE4Qk4sa0JBQTlCLENBQWI7QUFDQSxNQUFJUyxxQkFBcUIsR0FBR0osT0FBTyxDQUFDSyxZQUFSLENBQXFCLGtCQUFyQixNQUE2QyxVQUF6RSxDQUoyQixDQU0zQjs7QUFDQSxPQUFLLElBQUlDLENBQUMsR0FBRyxDQUFiLEVBQWdCQSxDQUFDLEdBQUdKLElBQUksQ0FBQ0ssTUFBekIsRUFBaUMsRUFBRUQsQ0FBbkMsRUFBc0M7QUFDbENFLGdCQUFZLENBQUNGLENBQUQsQ0FBWjtBQUNIOztBQUVELFdBQVNFLFlBQVQsQ0FBc0JDLEtBQXRCLEVBQTZCO0FBQ3pCUCxRQUFJLENBQUNPLEtBQUQsQ0FBSixDQUFZQyxnQkFBWixDQUE2QixPQUE3QixFQUFzQ0Msa0JBQXRDO0FBQ0FULFFBQUksQ0FBQ08sS0FBRCxDQUFKLENBQVlDLGdCQUFaLENBQTZCLFNBQTdCLEVBQXdDRSxvQkFBeEM7QUFDQVYsUUFBSSxDQUFDTyxLQUFELENBQUosQ0FBWUMsZ0JBQVosQ0FBNkIsT0FBN0IsRUFBc0NHLGtCQUF0QztBQUNBWCxRQUFJLENBQUNPLEtBQUQsQ0FBSixDQUFZQSxLQUFaLEdBQW9CQSxLQUFwQjtBQUNILEdBaEIwQixDQWtCM0I7OztBQUNBLFdBQVNFLGtCQUFULENBQTRCRyxLQUE1QixFQUFtQztBQUMvQixRQUFJQyxHQUFHLEdBQUdELEtBQUssQ0FBQ0UsTUFBaEI7QUFDQUMsZUFBVyxDQUFDRixHQUFELEVBQU0sS0FBTixDQUFYO0FBQ0gsR0F0QjBCLENBd0IzQjs7O0FBQ0EsV0FBU0gsb0JBQVQsQ0FBOEJFLEtBQTlCLEVBQXFDO0FBQ2pDLFlBQVFBLEtBQUssQ0FBQ0ksT0FBZDtBQUNJLFdBQUtsQyxRQUFRLENBQUNHLEdBQWQ7QUFDSTJCLGFBQUssQ0FBQ0ssY0FBTjtBQUNBRixtQkFBVyxDQUFDZixJQUFJLENBQUNBLElBQUksQ0FBQ0ssTUFBTCxHQUFjLENBQWYsQ0FBTCxDQUFYO0FBQ0E7O0FBQ0osV0FBS3ZCLFFBQVEsQ0FBQ0ksSUFBZDtBQUNJMEIsYUFBSyxDQUFDSyxjQUFOO0FBQ0FGLG1CQUFXLENBQUNmLElBQUksQ0FBQyxDQUFELENBQUwsQ0FBWDtBQUNBO0FBRUo7QUFDQTs7QUFDQSxXQUFLbEIsUUFBUSxDQUFDTSxFQUFkO0FBQ0EsV0FBS04sUUFBUSxDQUFDUSxJQUFkO0FBQ0k0Qiw0QkFBb0IsQ0FBQ04sS0FBRCxDQUFwQjtBQUNBO0FBZlI7QUFpQkgsR0EzQzBCLENBNkMzQjs7O0FBQ0EsV0FBU0Qsa0JBQVQsQ0FBNEJDLEtBQTVCLEVBQW1DO0FBQy9CLFlBQVFBLEtBQUssQ0FBQ0ksT0FBZDtBQUNJLFdBQUtsQyxRQUFRLENBQUNLLElBQWQ7QUFDQSxXQUFLTCxRQUFRLENBQUNPLEtBQWQ7QUFDSTZCLDRCQUFvQixDQUFDTixLQUFELENBQXBCO0FBQ0E7QUFKUjtBQU1ILEdBckQwQixDQXVEM0I7QUFDQTtBQUNBOzs7QUFDQSxXQUFTTSxvQkFBVCxDQUE4Qk4sS0FBOUIsRUFBcUM7QUFDakMsUUFBSU8sR0FBRyxHQUFHUCxLQUFLLENBQUNJLE9BQWhCOztBQUVBLFFBQUlkLHFCQUFxQixLQUFLaUIsR0FBRyxLQUFLckMsUUFBUSxDQUFDTSxFQUFqQixJQUF1QitCLEdBQUcsS0FBS3JDLFFBQVEsQ0FBQ1EsSUFBN0MsQ0FBekIsRUFBNkU7QUFDekVzQixXQUFLLENBQUNLLGNBQU47QUFDQUcsMkJBQXFCLENBQUNSLEtBQUQsQ0FBckI7QUFDSCxLQUhELE1BR08sSUFBSSxDQUFDVixxQkFBRCxLQUEyQmlCLEdBQUcsS0FBS3JDLFFBQVEsQ0FBQ0ssSUFBakIsSUFBeUJnQyxHQUFHLEtBQUtyQyxRQUFRLENBQUNPLEtBQXJFLENBQUosRUFBaUY7QUFDcEYrQiwyQkFBcUIsQ0FBQ1IsS0FBRCxDQUFyQjtBQUNIO0FBQ0osR0FuRTBCLENBcUUzQjtBQUNBOzs7QUFDQSxXQUFTUSxxQkFBVCxDQUErQlIsS0FBL0IsRUFBc0M7QUFDbEMsVUFBTVMsT0FBTyxHQUFHVCxLQUFLLENBQUNJLE9BQXRCO0FBQ0EsVUFBTUYsTUFBTSxHQUFHRixLQUFLLENBQUNFLE1BQXJCOztBQUVBLFNBQUssSUFBSVEsQ0FBQyxHQUFHLENBQWIsRUFBZ0JBLENBQUMsR0FBR3RCLElBQUksQ0FBQ0ssTUFBekIsRUFBaUNpQixDQUFDLEVBQWxDLEVBQXNDO0FBQ2xDdEIsVUFBSSxDQUFDc0IsQ0FBRCxDQUFKLENBQVFkLGdCQUFSLENBQXlCLE9BQXpCLEVBQWtDZSxpQkFBbEM7QUFDSDs7QUFFRCxVQUFNQyxTQUFTLEdBQ1hILE9BQU8sS0FBS3ZDLFFBQVEsQ0FBQ00sRUFBckIsSUFBMkJpQyxPQUFPLEtBQUt2QyxRQUFRLENBQUNLLElBQWhELEdBQ00sQ0FBQyxDQURQLEdBRU1rQyxPQUFPLEtBQUt2QyxRQUFRLENBQUNRLElBQXJCLElBQTZCK0IsT0FBTyxLQUFLdkMsUUFBUSxDQUFDTyxLQUFsRCxHQUNBLENBREEsR0FFQSxDQUxWOztBQU9BLFFBQUltQyxTQUFTLEtBQUssQ0FBZCxJQUFtQlYsTUFBTSxDQUFDUCxLQUFQLEtBQWlCa0IsU0FBeEMsRUFBbUQ7QUFDL0MsWUFBTUMsUUFBUSxHQUFHWixNQUFNLENBQUNQLEtBQVAsR0FBZWlCLFNBQWhDO0FBQ0EsWUFBTUcsV0FBVyxHQUFHRCxRQUFRLEdBQUcsQ0FBWCxHQUFlMUIsSUFBSSxDQUFDSyxNQUFMLEdBQWMsQ0FBN0IsR0FBaUNxQixRQUFRLEdBQUcxQixJQUFJLENBQUNLLE1BQWhCLEdBQXlCcUIsUUFBekIsR0FBb0MsQ0FBekY7QUFDQTFCLFVBQUksQ0FBQzJCLFdBQUQsQ0FBSixDQUFrQkMsS0FBbEI7QUFDSDtBQUNKLEdBM0YwQixDQTZGM0I7OztBQUNBLFdBQVNiLFdBQVQsQ0FBcUJGLEdBQXJCLEVBQTBCZ0IsUUFBMUIsRUFBb0M7QUFDaENBLFlBQVEsR0FBR0EsUUFBUSxJQUFJLElBQXZCLENBRGdDLENBRWhDOztBQUNBQyxrQkFBYztBQUVkakIsT0FBRyxDQUFDa0IsZUFBSixDQUFvQixVQUFwQjtBQUNBbEIsT0FBRyxDQUFDbUIsWUFBSixDQUFpQixlQUFqQixFQUFrQyxNQUFsQztBQUNBbkIsT0FBRyxDQUFDb0IsU0FBSixDQUFjQyxHQUFkLENBQWtCdkMsZ0JBQWxCO0FBRUEsVUFBTXdDLE9BQU8sR0FBR3RCLEdBQUcsQ0FBQ1YsWUFBSixDQUFpQixlQUFqQixDQUFoQjtBQUNBaUMsWUFBUSxDQUFDQyxjQUFULENBQXdCRixPQUF4QixFQUFpQ0osZUFBakMsQ0FBaUQsUUFBakQsRUFWZ0MsQ0FZaEM7O0FBQ0EsUUFBSUYsUUFBSixFQUFjO0FBQ1ZoQixTQUFHLENBQUNlLEtBQUo7QUFDSDtBQUNKLEdBOUcwQixDQWdIM0I7OztBQUNBLFdBQVNFLGNBQVQsR0FBMEI7QUFDdEIsS0FBQyxHQUFHOUIsSUFBSixFQUFVc0MsT0FBVixDQUFtQnpCLEdBQUQsSUFBUztBQUN2QkEsU0FBRyxDQUFDbUIsWUFBSixDQUFpQixVQUFqQixFQUE2QixJQUE3QjtBQUNBbkIsU0FBRyxDQUFDbUIsWUFBSixDQUFpQixlQUFqQixFQUFrQyxPQUFsQztBQUNBbkIsU0FBRyxDQUFDb0IsU0FBSixDQUFjTSxNQUFkLENBQXFCNUMsZ0JBQXJCO0FBQ0FrQixTQUFHLENBQUMyQixtQkFBSixDQUF3QixPQUF4QixFQUFpQ2pCLGlCQUFqQztBQUNILEtBTEQ7QUFPQSxLQUFDLEdBQUd0QixNQUFKLEVBQVlxQyxPQUFaLENBQXFCRyxLQUFELElBQVc7QUFDM0JBLFdBQUssQ0FBQ1QsWUFBTixDQUFtQixRQUFuQixFQUE2QixRQUE3QjtBQUNILEtBRkQ7QUFHSDs7QUFFRCxXQUFTVCxpQkFBVCxDQUEyQlgsS0FBM0IsRUFBa0M7QUFDOUIsUUFBSUUsTUFBTSxHQUFHRixLQUFLLENBQUNFLE1BQW5CO0FBQ0FDLGVBQVcsQ0FBQ0QsTUFBRCxFQUFTLEtBQVQsQ0FBWDtBQUNIO0FBQ0osQ0FsSUQ7O0FBb0lPLE1BQU00QixRQUFRLEdBQUcsTUFBTTtBQUMxQixRQUFNMUMsSUFBSSxHQUFHb0MsUUFBUSxDQUFDckMsZ0JBQVQsQ0FBMEJQLHVCQUExQixDQUFiO0FBQ0EsR0FBQyxHQUFHUSxJQUFKLEVBQVVzQyxPQUFWLENBQW1CSyxZQUFELElBQWtCO0FBQ2hDL0MsUUFBSSxDQUFDK0MsWUFBRCxDQUFKO0FBQ0gsR0FGRDtBQUdILENBTE0sQzs7QUM1SVA7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsNkRBQTZEOztBQUU3RDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsR0FBRztBQUNIOzs7QUFHQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0EsdURBQXVEO0FBQ3ZELHNCQUFzQjtBQUN0Qjs7O0FBR0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQSxpQkFBaUIsa0JBQWtCO0FBQ25DO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRXdEO0FBQ3hEOzs7QUMzS0E7QUFDQTtBQUNBO0FBQ0E7QUFDaUQ7O0FBRWpEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMLEdBQUc7QUFDSDtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQSxpQkFBaUIsc0JBQXNCO0FBQ3ZDOztBQUVBO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUCxLQUFLO0FBQ0w7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLENBQUM7O0FBRUQ7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRzs7QUFFSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBLDhCQUE4Qjs7QUFFOUIsd0NBQXdDO0FBQ3hDOztBQUVBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQSxLQUFLO0FBQ0w7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFD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QVQsR0FBaUM7QUFDN0IsS0FBQyxHQUFHSixNQUFKLEVBQVl0RixPQUFaLENBQXFCMEUsS0FBRCxJQUFXO0FBQzNCVSx1QkFBaUIsQ0FBQ1YsS0FBRCxDQUFqQjtBQUNILEtBRkQ7QUFHQWtCLG9CQUFnQjtBQUNuQjs7QUFFRDlDLG1CQUFpQjtBQUNwQjs7QUFFTSxNQUFNMkQsU0FBUyxHQUFHLE1BQU07QUFDM0JwQixZQUFVO0FBQ1ZFLGVBQWE7QUFDaEIsQ0FITSxDOztBQzNIUDtBQUNBO0FBQ0E7O0FBRUEsTUFBTW1CLE9BQU4sQ0FBVTtBQUNON0UsYUFBVyxHQUFHLENBQUU7O0FBQ2hCOEUsTUFBSSxHQUFHO0FBQ0g3QyxjQUFVO0FBQ1YxRCxZQUFRO0FBQ1JxRyxhQUFTO0FBQ1o7O0FBTks7O0FBU1YsTUFBTUcsR0FBRyxHQUFHLElBQUlGLE9BQUosRUFBWjtBQUNBNUcsUUFBUSxDQUFDNUIsZ0JBQVQsQ0FBMEIsa0JBQTFCLEVBQThDLE1BQU0wSSxHQUFHLENBQUNELElBQUosRUFBcEQsRTs7QUNkQSIsImZpbGUiOiIwLmpzIiwic291cmNlc0NvbnRlbnQiOlsiLy8gZXh0cmFjdGVkIGJ5IG1pbmktY3NzLWV4dHJhY3QtcGx1Z2luXG5leHBvcnQge307IiwiZXhwb3J0IGNvbnN0IEtFWV9DT0RFID0ge1xuICAgIFRBQjogOSxcbiAgICBFU0M6IDI3LFxuICAgIEVORDogMzUsXG4gICAgSE9NRTogMzYsXG4gICAgTEVGVDogMzcsXG4gICAgVVA6IDM4LFxuICAgIFJJR0hUOiAzOSxcbiAgICBET1dOOiA0MCxcbn07XG4iLCJpbXBvcnQgeyBLRVlfQ09ERSB9IGZyb20gJy4vdXRpbHMva2V5cyc7XG5cbmNvbnN0IFNFTEVDVE9SX1RBQiA9ICdbcm9sZT1cInRhYlwiXSc7XG5jb25zdCBTRUxFQ1RPUl9UQUJTX0NPTlRBSU5FUiA9ICcudGFicyc7XG5jb25zdCBTRUxFQ1RPUl9UQUJfUEFORUwgPSAnW3JvbGU9XCJ0YWJwYW5lbFwiXSc7XG5jb25zdCBTRUxFQ1RPUl9UQUJfTElTVCA9ICdbcm9sZT1cInRhYmxpc3RcIl0nO1xuY29uc3QgQ0xBU1NfVEFCX0FDVElWRSA9ICdhY3RpdmUnO1xuXG5jb25zdCBUYWJzID0gKHRhYkNvbnRhaW5lcikgPT4ge1xuICAgIGxldCB0YWJsaXN0ID0gdGFiQ29udGFpbmVyLnF1ZXJ5U2VsZWN0b3JBbGwoU0VMRUNUT1JfVEFCX0xJU1QpWzBdO1xuICAgIGxldCB0YWJzID0gdGFiQ29udGFpbmVyLnF1ZXJ5U2VsZWN0b3JBbGwoU0VMRUNUT1JfVEFCKTtcbiAgICBsZXQgcGFuZWxzID0gdGFiQ29udGFpbmVyLnF1ZXJ5U2VsZWN0b3JBbGwoU0VMRUNUT1JfVEFCX1BBTkVMKTtcbiAgICBsZXQgaXNWZXJ0aWNhbE9yaWVudGF0aW9uID0gdGFibGlzdC5nZXRBdHRyaWJ1dGUoJ2FyaWEtb3JpZW50YXRpb24nKSA9PT0gJ3ZlcnRpY2FsJztcblxuICAgIC8vIEJpbmQgbGlzdGVuZXJzXG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0YWJzLmxlbmd0aDsgKytpKSB7XG4gICAgICAgIGFkZExpc3RlbmVycyhpKTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBhZGRMaXN0ZW5lcnMoaW5kZXgpIHtcbiAgICAgICAgdGFic1tpbmRleF0uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBjbGlja0V2ZW50TGlzdGVuZXIpO1xuICAgICAgICB0YWJzW2luZGV4XS5hZGRFdmVudExpc3RlbmVyKCdrZXlkb3duJywga2V5ZG93bkV2ZW50TGlzdGVuZXIpO1xuICAgICAgICB0YWJzW2luZGV4XS5hZGRFdmVudExpc3RlbmVyKCdrZXl1cCcsIGtleXVwRXZlbnRMaXN0ZW5lcik7XG4gICAgICAgIHRhYnNbaW5kZXhdLmluZGV4ID0gaW5kZXg7XG4gICAgfVxuXG4gICAgLy8gV2hlbiBhIHRhYiBpcyBjbGlja2VkLCBhY3RpdmF0ZVRhYiBpcyBmaXJlZCB0byBhY3RpdmF0ZSBpdFxuICAgIGZ1bmN0aW9uIGNsaWNrRXZlbnRMaXN0ZW5lcihldmVudCkge1xuICAgICAgICBsZXQgdGFiID0gZXZlbnQudGFyZ2V0O1xuICAgICAgICBhY3RpdmF0ZVRhYih0YWIsIGZhbHNlKTtcbiAgICB9XG5cbiAgICAvLyBIYW5kbGUga2V5ZG93biBvbiB0YWJzXG4gICAgZnVuY3Rpb24ga2V5ZG93bkV2ZW50TGlzdGVuZXIoZXZlbnQpIHtcbiAgICAgICAgc3dpdGNoIChldmVudC5rZXlDb2RlKSB7XG4gICAgICAgICAgICBjYXNlIEtFWV9DT0RFLkVORDpcbiAgICAgICAgICAgICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICAgICAgICAgIGFjdGl2YXRlVGFiKHRhYnNbdGFicy5sZW5ndGggLSAxXSk7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlIEtFWV9DT0RFLkhPTUU6XG4gICAgICAgICAgICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgICAgICAgICBhY3RpdmF0ZVRhYih0YWJzWzBdKTtcbiAgICAgICAgICAgICAgICBicmVhaztcblxuICAgICAgICAgICAgLy8gVXAgYW5kIGRvd24gYXJlIGluIGtleWRvd25cbiAgICAgICAgICAgIC8vIGJlY2F1c2Ugd2UgbmVlZCB0byBwcmV2ZW50IHBhZ2Ugc2Nyb2xsID46KVxuICAgICAgICAgICAgY2FzZSBLRVlfQ09ERS5VUDpcbiAgICAgICAgICAgIGNhc2UgS0VZX0NPREUuRE9XTjpcbiAgICAgICAgICAgICAgICBkZXRlcm1pbmVPcmllbnRhdGlvbihldmVudCk7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICAvLyBIYW5kbGUga2V5dXAgb24gdGFic1xuICAgIGZ1bmN0aW9uIGtleXVwRXZlbnRMaXN0ZW5lcihldmVudCkge1xuICAgICAgICBzd2l0Y2ggKGV2ZW50LmtleUNvZGUpIHtcbiAgICAgICAgICAgIGNhc2UgS0VZX0NPREUuTEVGVDpcbiAgICAgICAgICAgIGNhc2UgS0VZX0NPREUuUklHSFQ6XG4gICAgICAgICAgICAgICAgZGV0ZXJtaW5lT3JpZW50YXRpb24oZXZlbnQpO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgLy8gV2hlbiBhIHRhYmxpc3TDouKCrOKEonMgYXJpYS1vcmllbnRhdGlvbiBpcyBzZXQgdG8gdmVydGljYWwsXG4gICAgLy8gb25seSB1cCBhbmQgZG93biBhcnJvdyBzaG91bGQgZnVuY3Rpb24uXG4gICAgLy8gSW4gYWxsIG90aGVyIGNhc2VzIG9ubHkgbGVmdCBhbmQgcmlnaHQgYXJyb3cgZnVuY3Rpb24uXG4gICAgZnVuY3Rpb24gZGV0ZXJtaW5lT3JpZW50YXRpb24oZXZlbnQpIHtcbiAgICAgICAgbGV0IGtleSA9IGV2ZW50LmtleUNvZGU7XG5cbiAgICAgICAgaWYgKGlzVmVydGljYWxPcmllbnRhdGlvbiAmJiAoa2V5ID09PSBLRVlfQ09ERS5VUCB8fCBrZXkgPT09IEtFWV9DT0RFLkRPV04pKSB7XG4gICAgICAgICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICAgICAgc3dpdGNoVGFiT25BcnJvd1ByZXNzKGV2ZW50KTtcbiAgICAgICAgfSBlbHNlIGlmICghaXNWZXJ0aWNhbE9yaWVudGF0aW9uICYmIChrZXkgPT09IEtFWV9DT0RFLkxFRlQgfHwga2V5ID09PSBLRVlfQ09ERS5SSUdIVCkpIHtcbiAgICAgICAgICAgIHN3aXRjaFRhYk9uQXJyb3dQcmVzcyhldmVudCk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICAvLyBFaXRoZXIgZm9jdXMgdGhlIG5leHQsIHByZXZpb3VzLCBmaXJzdCwgb3IgbGFzdCB0YWJcbiAgICAvLyBkZXBlbmluZyBvbiBrZXkgcHJlc3NlZFxuICAgIGZ1bmN0aW9uIHN3aXRjaFRhYk9uQXJyb3dQcmVzcyhldmVudCkge1xuICAgICAgICBjb25zdCBwcmVzc2VkID0gZXZlbnQua2V5Q29kZTtcbiAgICAgICAgY29uc3QgdGFyZ2V0ID0gZXZlbnQudGFyZ2V0O1xuXG4gICAgICAgIGZvciAobGV0IHggPSAwOyB4IDwgdGFicy5sZW5ndGg7IHgrKykge1xuICAgICAgICAgICAgdGFic1t4XS5hZGRFdmVudExpc3RlbmVyKCdmb2N1cycsIGZvY3VzRXZlbnRIYW5kbGVyKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGNvbnN0IGRpcmVjdGlvbiA9XG4gICAgICAgICAgICBwcmVzc2VkID09PSBLRVlfQ09ERS5VUCB8fCBwcmVzc2VkID09PSBLRVlfQ09ERS5MRUZUXG4gICAgICAgICAgICAgICAgPyAtMVxuICAgICAgICAgICAgICAgIDogcHJlc3NlZCA9PT0gS0VZX0NPREUuRE9XTiB8fCBwcmVzc2VkID09PSBLRVlfQ09ERS5SSUdIVFxuICAgICAgICAgICAgICAgID8gMVxuICAgICAgICAgICAgICAgIDogMDtcblxuICAgICAgICBpZiAoZGlyZWN0aW9uICE9PSAwICYmIHRhcmdldC5pbmRleCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICBjb25zdCBuZXdJbmRleCA9IHRhcmdldC5pbmRleCArIGRpcmVjdGlvbjtcbiAgICAgICAgICAgIGNvbnN0IGFjdGl2ZUluZGV4ID0gbmV3SW5kZXggPCAwID8gdGFicy5sZW5ndGggLSAxIDogbmV3SW5kZXggPCB0YWJzLmxlbmd0aCA/IG5ld0luZGV4IDogMDtcbiAgICAgICAgICAgIHRhYnNbYWN0aXZlSW5kZXhdLmZvY3VzKCk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICAvLyBBY3RpdmF0ZXMgYW55IGdpdmVuIHRhYiBwYW5lbFxuICAgIGZ1bmN0aW9uIGFjdGl2YXRlVGFiKHRhYiwgc2V0Rm9jdXMpIHtcbiAgICAgICAgc2V0Rm9jdXMgPSBzZXRGb2N1cyB8fCB0cnVlO1xuICAgICAgICAvLyBEZWFjdGl2YXRlIGFsbCBvdGhlciB0YWJzXG4gICAgICAgIGRlYWN0aXZhdGVUYWJzKCk7XG5cbiAgICAgICAgdGFiLnJlbW92ZUF0dHJpYnV0ZSgndGFiaW5kZXgnKTtcbiAgICAgICAgdGFiLnNldEF0dHJpYnV0ZSgnYXJpYS1zZWxlY3RlZCcsICd0cnVlJyk7XG4gICAgICAgIHRhYi5jbGFzc0xpc3QuYWRkKENMQVNTX1RBQl9BQ1RJVkUpO1xuXG4gICAgICAgIGNvbnN0IHBhbmVsSWQgPSB0YWIuZ2V0QXR0cmlidXRlKCdhcmlhLWNvbnRyb2xzJyk7XG4gICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKHBhbmVsSWQpLnJlbW92ZUF0dHJpYnV0ZSgnaGlkZGVuJyk7XG5cbiAgICAgICAgLy8gU2V0IGZvY3VzIHdoZW4gcmVxdWlyZWRcbiAgICAgICAgaWYgKHNldEZvY3VzKSB7XG4gICAgICAgICAgICB0YWIuZm9jdXMoKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIC8vIERlYWN0aXZhdGUgYWxsIHRhYnMgYW5kIHRhYiBwYW5lbHNcbiAgICBmdW5jdGlvbiBkZWFjdGl2YXRlVGFicygpIHtcbiAgICAgICAgWy4uLnRhYnNdLmZvckVhY2goKHRhYikgPT4ge1xuICAgICAgICAgICAgdGFiLnNldEF0dHJpYnV0ZSgndGFiaW5kZXgnLCAnLTEnKTtcbiAgICAgICAgICAgIHRhYi5zZXRBdHRyaWJ1dGUoJ2FyaWEtc2VsZWN0ZWQnLCAnZmFsc2UnKTtcbiAgICAgICAgICAgIHRhYi5jbGFzc0xpc3QucmVtb3ZlKENMQVNTX1RBQl9BQ1RJVkUpO1xuICAgICAgICAgICAgdGFiLnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2ZvY3VzJywgZm9jdXNFdmVudEhhbmRsZXIpO1xuICAgICAgICB9KTtcblxuICAgICAgICBbLi4ucGFuZWxzXS5mb3JFYWNoKChwYW5lbCkgPT4ge1xuICAgICAgICAgICAgcGFuZWwuc2V0QXR0cmlidXRlKCdoaWRkZW4nLCAnaGlkZGVuJyk7XG4gICAgICAgIH0pO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIGZvY3VzRXZlbnRIYW5kbGVyKGV2ZW50KSB7XG4gICAgICAgIGxldCB0YXJnZXQgPSBldmVudC50YXJnZXQ7XG4gICAgICAgIGFjdGl2YXRlVGFiKHRhcmdldCwgZmFsc2UpO1xuICAgIH1cbn07XG5cbmV4cG9ydCBjb25zdCBpbml0VGFicyA9ICgpID0+IHtcbiAgICBjb25zdCB0YWJzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChTRUxFQ1RPUl9UQUJTX0NPTlRBSU5FUik7XG4gICAgWy4uLnRhYnNdLmZvckVhY2goKHRhYkNvbmF0aW5lcikgPT4ge1xuICAgICAgICBUYWJzKHRhYkNvbmF0aW5lcik7XG4gICAgfSk7XG59O1xuIiwiLyohXG4qIHRhYmJhYmxlIDUuMS4yXG4qIEBsaWNlbnNlIE1JVCwgaHR0cHM6Ly9naXRodWIuY29tL2ZvY3VzLXRyYXAvdGFiYmFibGUvYmxvYi9tYXN0ZXIvTElDRU5TRVxuKi9cbnZhciBjYW5kaWRhdGVTZWxlY3RvcnMgPSBbJ2lucHV0JywgJ3NlbGVjdCcsICd0ZXh0YXJlYScsICdhW2hyZWZdJywgJ2J1dHRvbicsICdbdGFiaW5kZXhdJywgJ2F1ZGlvW2NvbnRyb2xzXScsICd2aWRlb1tjb250cm9sc10nLCAnW2NvbnRlbnRlZGl0YWJsZV06bm90KFtjb250ZW50ZWRpdGFibGU9XCJmYWxzZVwiXSknLCAnZGV0YWlscz5zdW1tYXJ5J107XG52YXIgY2FuZGlkYXRlU2VsZWN0b3IgPSAvKiAjX19QVVJFX18gKi9jYW5kaWRhdGVTZWxlY3RvcnMuam9pbignLCcpO1xudmFyIG1hdGNoZXMgPSB0eXBlb2YgRWxlbWVudCA9PT0gJ3VuZGVmaW5lZCcgPyBmdW5jdGlvbiAoKSB7fSA6IEVsZW1lbnQucHJvdG90eXBlLm1hdGNoZXMgfHwgRWxlbWVudC5wcm90b3R5cGUubXNNYXRjaGVzU2VsZWN0b3IgfHwgRWxlbWVudC5wcm90b3R5cGUud2Via2l0TWF0Y2hlc1NlbGVjdG9yO1xuXG5mdW5jdGlvbiB0YWJiYWJsZShlbCwgb3B0aW9ucykge1xuICBvcHRpb25zID0gb3B0aW9ucyB8fCB7fTtcbiAgdmFyIHJlZ3VsYXJUYWJiYWJsZXMgPSBbXTtcbiAgdmFyIG9yZGVyZWRUYWJiYWJsZXMgPSBbXTtcbiAgdmFyIGNhbmRpZGF0ZXMgPSBnZXRDYW5kaWRhdGVzKGVsLCBvcHRpb25zLmluY2x1ZGVDb250YWluZXIsIGlzTm9kZU1hdGNoaW5nU2VsZWN0b3JUYWJiYWJsZSk7XG4gIGNhbmRpZGF0ZXMuZm9yRWFjaChmdW5jdGlvbiAoY2FuZGlkYXRlLCBpKSB7XG4gICAgdmFyIGNhbmRpZGF0ZVRhYmluZGV4ID0gZ2V0VGFiaW5kZXgoY2FuZGlkYXRlKTtcblxuICAgIGlmIChjYW5kaWRhdGVUYWJpbmRleCA9PT0gMCkge1xuICAgICAgcmVndWxhclRhYmJhYmxlcy5wdXNoKGNhbmRpZGF0ZSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIG9yZGVyZWRUYWJiYWJsZXMucHVzaCh7XG4gICAgICAgIGRvY3VtZW50T3JkZXI6IGksXG4gICAgICAgIHRhYkluZGV4OiBjYW5kaWRhdGVUYWJpbmRleCxcbiAgICAgICAgbm9kZTogY2FuZGlkYXRlXG4gICAgICB9KTtcbiAgICB9XG4gIH0pO1xuICB2YXIgdGFiYmFibGVOb2RlcyA9IG9yZGVyZWRUYWJiYWJsZXMuc29ydChzb3J0T3JkZXJlZFRhYmJhYmxlcykubWFwKGZ1bmN0aW9uIChhKSB7XG4gICAgcmV0dXJuIGEubm9kZTtcbiAgfSkuY29uY2F0KHJlZ3VsYXJUYWJiYWJsZXMpO1xuICByZXR1cm4gdGFiYmFibGVOb2Rlcztcbn1cblxuZnVuY3Rpb24gZm9jdXNhYmxlKGVsLCBvcHRpb25zKSB7XG4gIG9wdGlvbnMgPSBvcHRpb25zIHx8IHt9O1xuICB2YXIgY2FuZGlkYXRlcyA9IGdldENhbmRpZGF0ZXMoZWwsIG9wdGlvbnMuaW5jbHVkZUNvbnRhaW5lciwgaXNOb2RlTWF0Y2hpbmdTZWxlY3RvckZvY3VzYWJsZSk7XG4gIHJldHVybiBjYW5kaWRhdGVzO1xufVxuXG5mdW5jdGlvbiBnZXRDYW5kaWRhdGVzKGVsLCBpbmNsdWRlQ29udGFpbmVyLCBmaWx0ZXIpIHtcbiAgdmFyIGNhbmRpZGF0ZXMgPSBBcnJheS5wcm90b3R5cGUuc2xpY2UuYXBwbHkoZWwucXVlcnlTZWxlY3RvckFsbChjYW5kaWRhdGVTZWxlY3RvcikpO1xuXG4gIGlmIChpbmNsdWRlQ29udGFpbmVyICYmIG1hdGNoZXMuY2FsbChlbCwgY2FuZGlkYXRlU2VsZWN0b3IpKSB7XG4gICAgY2FuZGlkYXRlcy51bnNoaWZ0KGVsKTtcbiAgfVxuXG4gIGNhbmRpZGF0ZXMgPSBjYW5kaWRhdGVzLmZpbHRlcihmaWx0ZXIpO1xuICByZXR1cm4gY2FuZGlkYXRlcztcbn1cblxuZnVuY3Rpb24gaXNOb2RlTWF0Y2hpbmdTZWxlY3RvclRhYmJhYmxlKG5vZGUpIHtcbiAgaWYgKCFpc05vZGVNYXRjaGluZ1NlbGVjdG9yRm9jdXNhYmxlKG5vZGUpIHx8IGlzTm9uVGFiYmFibGVSYWRpbyhub2RlKSB8fCBnZXRUYWJpbmRleChub2RlKSA8IDApIHtcbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cblxuICByZXR1cm4gdHJ1ZTtcbn1cblxuZnVuY3Rpb24gaXNUYWJiYWJsZShub2RlKSB7XG4gIGlmICghbm9kZSkge1xuICAgIHRocm93IG5ldyBFcnJvcignTm8gbm9kZSBwcm92aWRlZCcpO1xuICB9XG5cbiAgaWYgKG1hdGNoZXMuY2FsbChub2RlLCBjYW5kaWRhdGVTZWxlY3RvcikgPT09IGZhbHNlKSB7XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG5cbiAgcmV0dXJuIGlzTm9kZU1hdGNoaW5nU2VsZWN0b3JUYWJiYWJsZShub2RlKTtcbn1cblxuZnVuY3Rpb24gaXNOb2RlTWF0Y2hpbmdTZWxlY3RvckZvY3VzYWJsZShub2RlKSB7XG4gIGlmIChub2RlLmRpc2FibGVkIHx8IGlzSGlkZGVuSW5wdXQobm9kZSkgfHwgaXNIaWRkZW4obm9kZSkpIHtcbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cblxuICByZXR1cm4gdHJ1ZTtcbn1cblxudmFyIGZvY3VzYWJsZUNhbmRpZGF0ZVNlbGVjdG9yID0gLyogI19fUFVSRV9fICovY2FuZGlkYXRlU2VsZWN0b3JzLmNvbmNhdCgnaWZyYW1lJykuam9pbignLCcpO1xuXG5mdW5jdGlvbiBpc0ZvY3VzYWJsZShub2RlKSB7XG4gIGlmICghbm9kZSkge1xuICAgIHRocm93IG5ldyBFcnJvcignTm8gbm9kZSBwcm92aWRlZCcpO1xuICB9XG5cbiAgaWYgKG1hdGNoZXMuY2FsbChub2RlLCBmb2N1c2FibGVDYW5kaWRhdGVTZWxlY3RvcikgPT09IGZhbHNlKSB7XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG5cbiAgcmV0dXJuIGlzTm9kZU1hdGNoaW5nU2VsZWN0b3JGb2N1c2FibGUobm9kZSk7XG59XG5cbmZ1bmN0aW9uIGdldFRhYmluZGV4KG5vZGUpIHtcbiAgdmFyIHRhYmluZGV4QXR0ciA9IHBhcnNlSW50KG5vZGUuZ2V0QXR0cmlidXRlKCd0YWJpbmRleCcpLCAxMCk7XG5cbiAgaWYgKCFpc05hTih0YWJpbmRleEF0dHIpKSB7XG4gICAgcmV0dXJuIHRhYmluZGV4QXR0cjtcbiAgfSAvLyBCcm93c2VycyBkbyBub3QgcmV0dXJuIGB0YWJJbmRleGAgY29ycmVjdGx5IGZvciBjb250ZW50RWRpdGFibGUgbm9kZXM7XG4gIC8vIHNvIGlmIHRoZXkgZG9uJ3QgaGF2ZSBhIHRhYmluZGV4IGF0dHJpYnV0ZSBzcGVjaWZpY2FsbHkgc2V0LCBhc3N1bWUgaXQncyAwLlxuXG5cbiAgaWYgKGlzQ29udGVudEVkaXRhYmxlKG5vZGUpKSB7XG4gICAgcmV0dXJuIDA7XG4gIH0gLy8gaW4gQ2hyb21lLCA8YXVkaW8gY29udHJvbHMvPiBhbmQgPHZpZGVvIGNvbnRyb2xzLz4gZWxlbWVudHMgZ2V0IGEgZGVmYXVsdFxuICAvLyAgYHRhYkluZGV4YCBvZiAtMSB3aGVuIHRoZSAndGFiaW5kZXgnIGF0dHJpYnV0ZSBpc24ndCBzcGVjaWZpZWQgaW4gdGhlIERPTSxcbiAgLy8gIHlldCB0aGV5IGFyZSBzdGlsbCBwYXJ0IG9mIHRoZSByZWd1bGFyIHRhYiBvcmRlcjsgaW4gRkYsIHRoZXkgZ2V0IGEgZGVmYXVsdFxuICAvLyAgYHRhYkluZGV4YCBvZiAwOyBzaW5jZSBDaHJvbWUgc3RpbGwgcHV0cyB0aG9zZSBlbGVtZW50cyBpbiB0aGUgcmVndWxhciB0YWJcbiAgLy8gIG9yZGVyLCBjb25zaWRlciB0aGVpciB0YWIgaW5kZXggdG8gYmUgMFxuXG5cbiAgaWYgKChub2RlLm5vZGVOYW1lID09PSAnQVVESU8nIHx8IG5vZGUubm9kZU5hbWUgPT09ICdWSURFTycpICYmIG5vZGUuZ2V0QXR0cmlidXRlKCd0YWJpbmRleCcpID09PSBudWxsKSB7XG4gICAgcmV0dXJuIDA7XG4gIH1cblxuICByZXR1cm4gbm9kZS50YWJJbmRleDtcbn1cblxuZnVuY3Rpb24gc29ydE9yZGVyZWRUYWJiYWJsZXMoYSwgYikge1xuICByZXR1cm4gYS50YWJJbmRleCA9PT0gYi50YWJJbmRleCA/IGEuZG9jdW1lbnRPcmRlciAtIGIuZG9jdW1lbnRPcmRlciA6IGEudGFiSW5kZXggLSBiLnRhYkluZGV4O1xufVxuXG5mdW5jdGlvbiBpc0NvbnRlbnRFZGl0YWJsZShub2RlKSB7XG4gIHJldHVybiBub2RlLmNvbnRlbnRFZGl0YWJsZSA9PT0gJ3RydWUnO1xufVxuXG5mdW5jdGlvbiBpc0lucHV0KG5vZGUpIHtcbiAgcmV0dXJuIG5vZGUudGFnTmFtZSA9PT0gJ0lOUFVUJztcbn1cblxuZnVuY3Rpb24gaXNIaWRkZW5JbnB1dChub2RlKSB7XG4gIHJldHVybiBpc0lucHV0KG5vZGUpICYmIG5vZGUudHlwZSA9PT0gJ2hpZGRlbic7XG59XG5cbmZ1bmN0aW9uIGlzUmFkaW8obm9kZSkge1xuICByZXR1cm4gaXNJbnB1dChub2RlKSAmJiBub2RlLnR5cGUgPT09ICdyYWRpbyc7XG59XG5cbmZ1bmN0aW9uIGlzTm9uVGFiYmFibGVSYWRpbyhub2RlKSB7XG4gIHJldHVybiBpc1JhZGlvKG5vZGUpICYmICFpc1RhYmJhYmxlUmFkaW8obm9kZSk7XG59XG5cbmZ1bmN0aW9uIGdldENoZWNrZWRSYWRpbyhub2RlcywgZm9ybSkge1xuICBmb3IgKHZhciBpID0gMDsgaSA8IG5vZGVzLmxlbmd0aDsgaSsrKSB7XG4gICAgaWYgKG5vZGVzW2ldLmNoZWNrZWQgJiYgbm9kZXNbaV0uZm9ybSA9PT0gZm9ybSkge1xuICAgICAgcmV0dXJuIG5vZGVzW2ldO1xuICAgIH1cbiAgfVxufVxuXG5mdW5jdGlvbiBpc1RhYmJhYmxlUmFkaW8obm9kZSkge1xuICBpZiAoIW5vZGUubmFtZSkge1xuICAgIHJldHVybiB0cnVlO1xuICB9XG5cbiAgdmFyIHJhZGlvU2NvcGUgPSBub2RlLmZvcm0gfHwgbm9kZS5vd25lckRvY3VtZW50O1xuICB2YXIgcmFkaW9TZXQgPSByYWRpb1Njb3BlLnF1ZXJ5U2VsZWN0b3JBbGwoJ2lucHV0W3R5cGU9XCJyYWRpb1wiXVtuYW1lPVwiJyArIG5vZGUubmFtZSArICdcIl0nKTtcbiAgdmFyIGNoZWNrZWQgPSBnZXRDaGVja2VkUmFkaW8ocmFkaW9TZXQsIG5vZGUuZm9ybSk7XG4gIHJldHVybiAhY2hlY2tlZCB8fCBjaGVja2VkID09PSBub2RlO1xufVxuXG5mdW5jdGlvbiBpc0hpZGRlbihub2RlKSB7XG4gIGlmIChnZXRDb21wdXRlZFN0eWxlKG5vZGUpLnZpc2liaWxpdHkgPT09ICdoaWRkZW4nKSByZXR1cm4gdHJ1ZTtcblxuICB3aGlsZSAobm9kZSkge1xuICAgIGlmIChnZXRDb21wdXRlZFN0eWxlKG5vZGUpLmRpc3BsYXkgPT09ICdub25lJykgcmV0dXJuIHRydWU7XG4gICAgbm9kZSA9IG5vZGUucGFyZW50RWxlbWVudDtcbiAgfVxuXG4gIHJldHVybiBmYWxzZTtcbn1cblxuZXhwb3J0IHsgZm9jdXNhYmxlLCBpc0ZvY3VzYWJsZSwgaXNUYWJiYWJsZSwgdGFiYmFibGUgfTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWluZGV4LmVzbS5qcy5tYXBcbiIsIi8qIVxuKiBmb2N1cy10cmFwIDYuMS4zXG4qIEBsaWNlbnNlIE1JVCwgaHR0cHM6Ly9naXRodWIuY29tL2ZvY3VzLXRyYXAvZm9jdXMtdHJhcC9ibG9iL21hc3Rlci9MSUNFTlNFXG4qL1xuaW1wb3J0IHsgaXNGb2N1c2FibGUsIHRhYmJhYmxlIH0gZnJvbSAndGFiYmFibGUnO1xuXG5mdW5jdGlvbiBfZGVmaW5lUHJvcGVydHkob2JqLCBrZXksIHZhbHVlKSB7XG4gIGlmIChrZXkgaW4gb2JqKSB7XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KG9iaiwga2V5LCB7XG4gICAgICB2YWx1ZTogdmFsdWUsXG4gICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgd3JpdGFibGU6IHRydWVcbiAgICB9KTtcbiAgfSBlbHNlIHtcbiAgICBvYmpba2V5XSA9IHZhbHVlO1xuICB9XG5cbiAgcmV0dXJuIG9iajtcbn1cblxuZnVuY3Rpb24gb3duS2V5cyhvYmplY3QsIGVudW1lcmFibGVPbmx5KSB7XG4gIHZhciBrZXlzID0gT2JqZWN0LmtleXMob2JqZWN0KTtcblxuICBpZiAoT2JqZWN0LmdldE93blByb3BlcnR5U3ltYm9scykge1xuICAgIHZhciBzeW1ib2xzID0gT2JqZWN0LmdldE93blByb3BlcnR5U3ltYm9scyhvYmplY3QpO1xuICAgIGlmIChlbnVtZXJhYmxlT25seSkgc3ltYm9scyA9IHN5bWJvbHMuZmlsdGVyKGZ1bmN0aW9uIChzeW0pIHtcbiAgICAgIHJldHVybiBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKG9iamVjdCwgc3ltKS5lbnVtZXJhYmxlO1xuICAgIH0pO1xuICAgIGtleXMucHVzaC5hcHBseShrZXlzLCBzeW1ib2xzKTtcbiAgfVxuXG4gIHJldHVybiBrZXlzO1xufVxuXG5mdW5jdGlvbiBfb2JqZWN0U3ByZWFkMih0YXJnZXQpIHtcbiAgZm9yICh2YXIgaSA9IDE7IGkgPCBhcmd1bWVudHMubGVuZ3RoOyBpKyspIHtcbiAgICB2YXIgc291cmNlID0gYXJndW1lbnRzW2ldICE9IG51bGwgPyBhcmd1bWVudHNbaV0gOiB7fTtcblxuICAgIGlmIChpICUgMikge1xuICAgICAgb3duS2V5cyhPYmplY3Qoc291cmNlKSwgdHJ1ZSkuZm9yRWFjaChmdW5jdGlvbiAoa2V5KSB7XG4gICAgICAgIF9kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsIGtleSwgc291cmNlW2tleV0pO1xuICAgICAgfSk7XG4gICAgfSBlbHNlIGlmIChPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9ycykge1xuICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnRpZXModGFyZ2V0LCBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9ycyhzb3VyY2UpKTtcbiAgICB9IGVsc2Uge1xuICAgICAgb3duS2V5cyhPYmplY3Qoc291cmNlKSkuZm9yRWFjaChmdW5jdGlvbiAoa2V5KSB7XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsIGtleSwgT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcihzb3VyY2UsIGtleSkpO1xuICAgICAgfSk7XG4gICAgfVxuICB9XG5cbiAgcmV0dXJuIHRhcmdldDtcbn1cblxudmFyIGFjdGl2ZUZvY3VzRGVsYXk7XG5cbnZhciBhY3RpdmVGb2N1c1RyYXBzID0gZnVuY3Rpb24gKCkge1xuICB2YXIgdHJhcFF1ZXVlID0gW107XG4gIHJldHVybiB7XG4gICAgYWN0aXZhdGVUcmFwOiBmdW5jdGlvbiBhY3RpdmF0ZVRyYXAodHJhcCkge1xuICAgICAgaWYgKHRyYXBRdWV1ZS5sZW5ndGggPiAwKSB7XG4gICAgICAgIHZhciBhY3RpdmVUcmFwID0gdHJhcFF1ZXVlW3RyYXBRdWV1ZS5sZW5ndGggLSAxXTtcblxuICAgICAgICBpZiAoYWN0aXZlVHJhcCAhPT0gdHJhcCkge1xuICAgICAgICAgIGFjdGl2ZVRyYXAucGF1c2UoKTtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICB2YXIgdHJhcEluZGV4ID0gdHJhcFF1ZXVlLmluZGV4T2YodHJhcCk7XG5cbiAgICAgIGlmICh0cmFwSW5kZXggPT09IC0xKSB7XG4gICAgICAgIHRyYXBRdWV1ZS5wdXNoKHRyYXApO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgLy8gbW92ZSB0aGlzIGV4aXN0aW5nIHRyYXAgdG8gdGhlIGZyb250IG9mIHRoZSBxdWV1ZVxuICAgICAgICB0cmFwUXVldWUuc3BsaWNlKHRyYXBJbmRleCwgMSk7XG4gICAgICAgIHRyYXBRdWV1ZS5wdXNoKHRyYXApO1xuICAgICAgfVxuICAgIH0sXG4gICAgZGVhY3RpdmF0ZVRyYXA6IGZ1bmN0aW9uIGRlYWN0aXZhdGVUcmFwKHRyYXApIHtcbiAgICAgIHZhciB0cmFwSW5kZXggPSB0cmFwUXVldWUuaW5kZXhPZih0cmFwKTtcblxuICAgICAgaWYgKHRyYXBJbmRleCAhPT0gLTEpIHtcbiAgICAgICAgdHJhcFF1ZXVlLnNwbGljZSh0cmFwSW5kZXgsIDEpO1xuICAgICAgfVxuXG4gICAgICBpZiAodHJhcFF1ZXVlLmxlbmd0aCA+IDApIHtcbiAgICAgICAgdHJhcFF1ZXVlW3RyYXBRdWV1ZS5sZW5ndGggLSAxXS51bnBhdXNlKCk7XG4gICAgICB9XG4gICAgfVxuICB9O1xufSgpO1xuXG5mdW5jdGlvbiBjcmVhdGVGb2N1c1RyYXAoZWxlbWVudCwgdXNlck9wdGlvbnMpIHtcbiAgdmFyIGRvYyA9IGRvY3VtZW50O1xuICB2YXIgY29udGFpbmVyID0gdHlwZW9mIGVsZW1lbnQgPT09ICdzdHJpbmcnID8gZG9jLnF1ZXJ5U2VsZWN0b3IoZWxlbWVudCkgOiBlbGVtZW50O1xuXG4gIHZhciBjb25maWcgPSBfb2JqZWN0U3ByZWFkMih7XG4gICAgcmV0dXJuRm9jdXNPbkRlYWN0aXZhdGU6IHRydWUsXG4gICAgZXNjYXBlRGVhY3RpdmF0ZXM6IHRydWUsXG4gICAgZGVsYXlJbml0aWFsRm9jdXM6IHRydWVcbiAgfSwgdXNlck9wdGlvbnMpO1xuXG4gIHZhciBzdGF0ZSA9IHtcbiAgICBmaXJzdFRhYmJhYmxlTm9kZTogbnVsbCxcbiAgICBsYXN0VGFiYmFibGVOb2RlOiBudWxsLFxuICAgIG5vZGVGb2N1c2VkQmVmb3JlQWN0aXZhdGlvbjogbnVsbCxcbiAgICBtb3N0UmVjZW50bHlGb2N1c2VkTm9kZTogbnVsbCxcbiAgICBhY3RpdmU6IGZhbHNlLFxuICAgIHBhdXNlZDogZmFsc2VcbiAgfTtcbiAgdmFyIHRyYXAgPSB7XG4gICAgYWN0aXZhdGU6IGFjdGl2YXRlLFxuICAgIGRlYWN0aXZhdGU6IGRlYWN0aXZhdGUsXG4gICAgcGF1c2U6IHBhdXNlLFxuICAgIHVucGF1c2U6IHVucGF1c2VcbiAgfTtcbiAgcmV0dXJuIHRyYXA7XG5cbiAgZnVuY3Rpb24gYWN0aXZhdGUoYWN0aXZhdGVPcHRpb25zKSB7XG4gICAgaWYgKHN0YXRlLmFjdGl2ZSkgcmV0dXJuO1xuICAgIHVwZGF0ZVRhYmJhYmxlTm9kZXMoKTtcbiAgICBzdGF0ZS5hY3RpdmUgPSB0cnVlO1xuICAgIHN0YXRlLnBhdXNlZCA9IGZhbHNlO1xuICAgIHN0YXRlLm5vZGVGb2N1c2VkQmVmb3JlQWN0aXZhdGlvbiA9IGRvYy5hY3RpdmVFbGVtZW50O1xuICAgIHZhciBvbkFjdGl2YXRlID0gYWN0aXZhdGVPcHRpb25zICYmIGFjdGl2YXRlT3B0aW9ucy5vbkFjdGl2YXRlID8gYWN0aXZhdGVPcHRpb25zLm9uQWN0aXZhdGUgOiBjb25maWcub25BY3RpdmF0ZTtcblxuICAgIGlmIChvbkFjdGl2YXRlKSB7XG4gICAgICBvbkFjdGl2YXRlKCk7XG4gICAgfVxuXG4gICAgYWRkTGlzdGVuZXJzKCk7XG4gICAgcmV0dXJuIHRyYXA7XG4gIH1cblxuICBmdW5jdGlvbiBkZWFjdGl2YXRlKGRlYWN0aXZhdGVPcHRpb25zKSB7XG4gICAgaWYgKCFzdGF0ZS5hY3RpdmUpIHJldHVybjtcbiAgICBjbGVhclRpbWVvdXQoYWN0aXZlRm9jdXNEZWxheSk7XG4gICAgcmVtb3ZlTGlzdGVuZXJzKCk7XG4gICAgc3RhdGUuYWN0aXZlID0gZmFsc2U7XG4gICAgc3RhdGUucGF1c2VkID0gZmFsc2U7XG4gICAgYWN0aXZlRm9jdXNUcmFwcy5kZWFjdGl2YXRlVHJhcCh0cmFwKTtcbiAgICB2YXIgb25EZWFjdGl2YXRlID0gZGVhY3RpdmF0ZU9wdGlvbnMgJiYgZGVhY3RpdmF0ZU9wdGlvbnMub25EZWFjdGl2YXRlICE9PSB1bmRlZmluZWQgPyBkZWFjdGl2YXRlT3B0aW9ucy5vbkRlYWN0aXZhdGUgOiBjb25maWcub25EZWFjdGl2YXRlO1xuXG4gICAgaWYgKG9uRGVhY3RpdmF0ZSkge1xuICAgICAgb25EZWFjdGl2YXRlKCk7XG4gICAgfVxuXG4gICAgdmFyIHJldHVybkZvY3VzID0gZGVhY3RpdmF0ZU9wdGlvbnMgJiYgZGVhY3RpdmF0ZU9wdGlvbnMucmV0dXJuRm9jdXMgIT09IHVuZGVmaW5lZCA/IGRlYWN0aXZhdGVPcHRpb25zLnJldHVybkZvY3VzIDogY29uZmlnLnJldHVybkZvY3VzT25EZWFjdGl2YXRlO1xuXG4gICAgaWYgKHJldHVybkZvY3VzKSB7XG4gICAgICBkZWxheShmdW5jdGlvbiAoKSB7XG4gICAgICAgIHRyeUZvY3VzKGdldFJldHVybkZvY3VzTm9kZShzdGF0ZS5ub2RlRm9jdXNlZEJlZm9yZUFjdGl2YXRpb24pKTtcbiAgICAgIH0pO1xuICAgIH1cblxuICAgIHJldHVybiB0cmFwO1xuICB9XG5cbiAgZnVuY3Rpb24gcGF1c2UoKSB7XG4gICAgaWYgKHN0YXRlLnBhdXNlZCB8fCAhc3RhdGUuYWN0aXZlKSByZXR1cm47XG4gICAgc3RhdGUucGF1c2VkID0gdHJ1ZTtcbiAgICByZW1vdmVMaXN0ZW5lcnMoKTtcbiAgfVxuXG4gIGZ1bmN0aW9uIHVucGF1c2UoKSB7XG4gICAgaWYgKCFzdGF0ZS5wYXVzZWQgfHwgIXN0YXRlLmFjdGl2ZSkgcmV0dXJuO1xuICAgIHN0YXRlLnBhdXNlZCA9IGZhbHNlO1xuICAgIHVwZGF0ZVRhYmJhYmxlTm9kZXMoKTtcbiAgICBhZGRMaXN0ZW5lcnMoKTtcbiAgfVxuXG4gIGZ1bmN0aW9uIGFkZExpc3RlbmVycygpIHtcbiAgICBpZiAoIXN0YXRlLmFjdGl2ZSkgcmV0dXJuOyAvLyBUaGVyZSBjYW4gYmUgb25seSBvbmUgbGlzdGVuaW5nIGZvY3VzIHRyYXAgYXQgYSB0aW1lXG5cbiAgICBhY3RpdmVGb2N1c1RyYXBzLmFjdGl2YXRlVHJhcCh0cmFwKTsgLy8gRGVsYXkgZW5zdXJlcyB0aGF0IHRoZSBmb2N1c2VkIGVsZW1lbnQgZG9lc24ndCBjYXB0dXJlIHRoZSBldmVudFxuICAgIC8vIHRoYXQgY2F1c2VkIHRoZSBmb2N1cyB0cmFwIGFjdGl2YXRpb24uXG5cbiAgICBhY3RpdmVGb2N1c0RlbGF5ID0gY29uZmlnLmRlbGF5SW5pdGlhbEZvY3VzID8gZGVsYXkoZnVuY3Rpb24gKCkge1xuICAgICAgdHJ5Rm9jdXMoZ2V0SW5pdGlhbEZvY3VzTm9kZSgpKTtcbiAgICB9KSA6IHRyeUZvY3VzKGdldEluaXRpYWxGb2N1c05vZGUoKSk7XG4gICAgZG9jLmFkZEV2ZW50TGlzdGVuZXIoJ2ZvY3VzaW4nLCBjaGVja0ZvY3VzSW4sIHRydWUpO1xuICAgIGRvYy5hZGRFdmVudExpc3RlbmVyKCdtb3VzZWRvd24nLCBjaGVja1BvaW50ZXJEb3duLCB7XG4gICAgICBjYXB0dXJlOiB0cnVlLFxuICAgICAgcGFzc2l2ZTogZmFsc2VcbiAgICB9KTtcbiAgICBkb2MuYWRkRXZlbnRMaXN0ZW5lcigndG91Y2hzdGFydCcsIGNoZWNrUG9pbnRlckRvd24sIHtcbiAgICAgIGNhcHR1cmU6IHRydWUsXG4gICAgICBwYXNzaXZlOiBmYWxzZVxuICAgIH0pO1xuICAgIGRvYy5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGNoZWNrQ2xpY2ssIHtcbiAgICAgIGNhcHR1cmU6IHRydWUsXG4gICAgICBwYXNzaXZlOiBmYWxzZVxuICAgIH0pO1xuICAgIGRvYy5hZGRFdmVudExpc3RlbmVyKCdrZXlkb3duJywgY2hlY2tLZXksIHtcbiAgICAgIGNhcHR1cmU6IHRydWUsXG4gICAgICBwYXNzaXZlOiBmYWxzZVxuICAgIH0pO1xuICAgIHJldHVybiB0cmFwO1xuICB9XG5cbiAgZnVuY3Rpb24gcmVtb3ZlTGlzdGVuZXJzKCkge1xuICAgIGlmICghc3RhdGUuYWN0aXZlKSByZXR1cm47XG4gICAgZG9jLnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2ZvY3VzaW4nLCBjaGVja0ZvY3VzSW4sIHRydWUpO1xuICAgIGRvYy5yZW1vdmVFdmVudExpc3RlbmVyKCdtb3VzZWRvd24nLCBjaGVja1BvaW50ZXJEb3duLCB0cnVlKTtcbiAgICBkb2MucmVtb3ZlRXZlbnRMaXN0ZW5lcigndG91Y2hzdGFydCcsIGNoZWNrUG9pbnRlckRvd24sIHRydWUpO1xuICAgIGRvYy5yZW1vdmVFdmVudExpc3RlbmVyKCdjbGljaycsIGNoZWNrQ2xpY2ssIHRydWUpO1xuICAgIGRvYy5yZW1vdmVFdmVudExpc3RlbmVyKCdrZXlkb3duJywgY2hlY2tLZXksIHRydWUpO1xuICAgIHJldHVybiB0cmFwO1xuICB9XG5cbiAgZnVuY3Rpb24gZ2V0Tm9kZUZvck9wdGlvbihvcHRpb25OYW1lKSB7XG4gICAgdmFyIG9wdGlvblZhbHVlID0gY29uZmlnW29wdGlvbk5hbWVdO1xuICAgIHZhciBub2RlID0gb3B0aW9uVmFsdWU7XG5cbiAgICBpZiAoIW9wdGlvblZhbHVlKSB7XG4gICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG5cbiAgICBpZiAodHlwZW9mIG9wdGlvblZhbHVlID09PSAnc3RyaW5nJykge1xuICAgICAgbm9kZSA9IGRvYy5xdWVyeVNlbGVjdG9yKG9wdGlvblZhbHVlKTtcblxuICAgICAgaWYgKCFub2RlKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcignYCcgKyBvcHRpb25OYW1lICsgJ2AgcmVmZXJzIHRvIG5vIGtub3duIG5vZGUnKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICBpZiAodHlwZW9mIG9wdGlvblZhbHVlID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICBub2RlID0gb3B0aW9uVmFsdWUoKTtcblxuICAgICAgaWYgKCFub2RlKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcignYCcgKyBvcHRpb25OYW1lICsgJ2AgZGlkIG5vdCByZXR1cm4gYSBub2RlJyk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgcmV0dXJuIG5vZGU7XG4gIH1cblxuICBmdW5jdGlvbiBnZXRJbml0aWFsRm9jdXNOb2RlKCkge1xuICAgIHZhciBub2RlO1xuXG4gICAgaWYgKGdldE5vZGVGb3JPcHRpb24oJ2luaXRpYWxGb2N1cycpICE9PSBudWxsKSB7XG4gICAgICBub2RlID0gZ2V0Tm9kZUZvck9wdGlvbignaW5pdGlhbEZvY3VzJyk7XG4gICAgfSBlbHNlIGlmIChjb250YWluZXIuY29udGFpbnMoZG9jLmFjdGl2ZUVsZW1lbnQpKSB7XG4gICAgICBub2RlID0gZG9jLmFjdGl2ZUVsZW1lbnQ7XG4gICAgfSBlbHNlIHtcbiAgICAgIG5vZGUgPSBzdGF0ZS5maXJzdFRhYmJhYmxlTm9kZSB8fCBnZXROb2RlRm9yT3B0aW9uKCdmYWxsYmFja0ZvY3VzJyk7XG4gICAgfVxuXG4gICAgaWYgKCFub2RlKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ1lvdXIgZm9jdXMtdHJhcCBuZWVkcyB0byBoYXZlIGF0IGxlYXN0IG9uZSBmb2N1c2FibGUgZWxlbWVudCcpO1xuICAgIH1cblxuICAgIHJldHVybiBub2RlO1xuICB9XG5cbiAgZnVuY3Rpb24gZ2V0UmV0dXJuRm9jdXNOb2RlKHByZXZpb3VzQWN0aXZlRWxlbWVudCkge1xuICAgIHZhciBub2RlID0gZ2V0Tm9kZUZvck9wdGlvbignc2V0UmV0dXJuRm9jdXMnKTtcbiAgICByZXR1cm4gbm9kZSA/IG5vZGUgOiBwcmV2aW91c0FjdGl2ZUVsZW1lbnQ7XG4gIH0gLy8gVGhpcyBuZWVkcyB0byBiZSBkb25lIG9uIG1vdXNlZG93biBhbmQgdG91Y2hzdGFydCBpbnN0ZWFkIG9mIGNsaWNrXG4gIC8vIHNvIHRoYXQgaXQgcHJlY2VkZXMgdGhlIGZvY3VzIGV2ZW50LlxuXG5cbiAgZnVuY3Rpb24gY2hlY2tQb2ludGVyRG93bihlKSB7XG4gICAgaWYgKGNvbnRhaW5lci5jb250YWlucyhlLnRhcmdldCkpIHtcbiAgICAgIC8vIGFsbG93IHRoZSBjbGljayBzaW5jZSBpdCBvY3VycmVkIGluc2lkZSB0aGUgdHJhcFxuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGlmIChjb25maWcuY2xpY2tPdXRzaWRlRGVhY3RpdmF0ZXMpIHtcbiAgICAgIC8vIGltbWVkaWF0ZWx5IGRlYWN0aXZhdGUgdGhlIHRyYXBcbiAgICAgIGRlYWN0aXZhdGUoe1xuICAgICAgICAvLyBpZiwgb24gZGVhY3RpdmF0aW9uLCB3ZSBzaG91bGQgcmV0dXJuIGZvY3VzIHRvIHRoZSBub2RlIG9yaWdpbmFsbHktZm9jdXNlZFxuICAgICAgICAvLyAgd2hlbiB0aGUgdHJhcCB3YXMgYWN0aXZhdGVkIChvciB0aGUgY29uZmlndXJlZCBgc2V0UmV0dXJuRm9jdXNgIG5vZGUpLFxuICAgICAgICAvLyAgdGhlbiBhc3N1bWUgaXQncyBhbHNvIE9LIHRvIHJldHVybiBmb2N1cyB0byB0aGUgb3V0c2lkZSBub2RlIHRoYXQgd2FzXG4gICAgICAgIC8vICBqdXN0IGNsaWNrZWQsIGNhdXNpbmcgZGVhY3RpdmF0aW9uLCBhcyBsb25nIGFzIHRoYXQgbm9kZSBpcyBmb2N1c2FibGU7XG4gICAgICAgIC8vICBpZiBpdCBpc24ndCBmb2N1c2FibGUsIHRoZW4gcmV0dXJuIGZvY3VzIHRvIHRoZSBvcmlnaW5hbCBub2RlIGZvY3VzZWRcbiAgICAgICAgLy8gIG9uIGFjdGl2YXRpb24gKG9yIHRoZSBjb25maWd1cmVkIGBzZXRSZXR1cm5Gb2N1c2Agbm9kZSlcbiAgICAgICAgLy8gTk9URTogYnkgc2V0dGluZyBgcmV0dXJuRm9jdXM6IGZhbHNlYCwgZGVhY3RpdmF0ZSgpIHdpbGwgZG8gbm90aGluZyxcbiAgICAgICAgLy8gIHdoaWNoIHdpbGwgcmVzdWx0IGluIHRoZSBvdXRzaWRlIGNsaWNrIHNldHRpbmcgZm9jdXMgdG8gdGhlIG5vZGVcbiAgICAgICAgLy8gIHRoYXQgd2FzIGNsaWNrZWQsIHdoZXRoZXIgaXQncyBmb2N1c2FibGUgb3Igbm90OyBieSBzZXR0aW5nXG4gICAgICAgIC8vICBgcmV0dXJuRm9jdXM6IHRydWVgLCB3ZSdsbCBhdHRlbXB0IHRvIHJlLWZvY3VzIHRoZSBub2RlIG9yaWdpbmFsbHktZm9jdXNlZFxuICAgICAgICAvLyAgb24gYWN0aXZhdGlvbiAob3IgdGhlIGNvbmZpZ3VyZWQgYHNldFJldHVybkZvY3VzYCBub2RlKVxuICAgICAgICByZXR1cm5Gb2N1czogY29uZmlnLnJldHVybkZvY3VzT25EZWFjdGl2YXRlICYmICFpc0ZvY3VzYWJsZShlLnRhcmdldClcbiAgICAgIH0pO1xuICAgICAgcmV0dXJuO1xuICAgIH0gLy8gVGhpcyBpcyBuZWVkZWQgZm9yIG1vYmlsZSBkZXZpY2VzLlxuICAgIC8vIChJZiB3ZSdsbCBvbmx5IGxldCBgY2xpY2tgIGV2ZW50cyB0aHJvdWdoLFxuICAgIC8vIHRoZW4gb24gbW9iaWxlIHRoZXkgd2lsbCBiZSBibG9ja2VkIGFueXdheXMgaWYgYHRvdWNoc3RhcnRgIGlzIGJsb2NrZWQuKVxuXG5cbiAgICBpZiAoY29uZmlnLmFsbG93T3V0c2lkZUNsaWNrICYmICh0eXBlb2YgY29uZmlnLmFsbG93T3V0c2lkZUNsaWNrID09PSAnYm9vbGVhbicgPyBjb25maWcuYWxsb3dPdXRzaWRlQ2xpY2sgOiBjb25maWcuYWxsb3dPdXRzaWRlQ2xpY2soZSkpKSB7XG4gICAgICAvLyBhbGxvdyB0aGUgY2xpY2sgb3V0c2lkZSB0aGUgdHJhcCB0byB0YWtlIHBsYWNlXG4gICAgICByZXR1cm47XG4gICAgfSAvLyBvdGhlcndpc2UsIHByZXZlbnQgdGhlIGNsaWNrXG5cblxuICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgfSAvLyBJbiBjYXNlIGZvY3VzIGVzY2FwZXMgdGhlIHRyYXAgZm9yIHNvbWUgc3RyYW5nZSByZWFzb24sIHB1bGwgaXQgYmFjayBpbi5cblxuXG4gIGZ1bmN0aW9uIGNoZWNrRm9jdXNJbihlKSB7XG4gICAgLy8gSW4gRmlyZWZveCB3aGVuIHlvdSBUYWIgb3V0IG9mIGFuIGlmcmFtZSB0aGUgRG9jdW1lbnQgaXMgYnJpZWZseSBmb2N1c2VkLlxuICAgIGlmIChjb250YWluZXIuY29udGFpbnMoZS50YXJnZXQpIHx8IGUudGFyZ2V0IGluc3RhbmNlb2YgRG9jdW1lbnQpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBlLnN0b3BJbW1lZGlhdGVQcm9wYWdhdGlvbigpO1xuICAgIHRyeUZvY3VzKHN0YXRlLm1vc3RSZWNlbnRseUZvY3VzZWROb2RlIHx8IGdldEluaXRpYWxGb2N1c05vZGUoKSk7XG4gIH1cblxuICBmdW5jdGlvbiBjaGVja0tleShlKSB7XG4gICAgaWYgKGNvbmZpZy5lc2NhcGVEZWFjdGl2YXRlcyAhPT0gZmFsc2UgJiYgaXNFc2NhcGVFdmVudChlKSkge1xuICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgZGVhY3RpdmF0ZSgpO1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGlmIChpc1RhYkV2ZW50KGUpKSB7XG4gICAgICBjaGVja1RhYihlKTtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gIH0gLy8gSGlqYWNrIFRhYiBldmVudHMgb24gdGhlIGZpcnN0IGFuZCBsYXN0IGZvY3VzYWJsZSBub2RlcyBvZiB0aGUgdHJhcCxcbiAgLy8gaW4gb3JkZXIgdG8gcHJldmVudCBmb2N1cyBmcm9tIGVzY2FwaW5nLiBJZiBpdCBlc2NhcGVzIGZvciBldmVuIGFcbiAgLy8gbW9tZW50IGl0IGNhbiBlbmQgdXAgc2Nyb2xsaW5nIHRoZSBwYWdlIGFuZCBjYXVzaW5nIGNvbmZ1c2lvbiBzbyB3ZVxuICAvLyBraW5kIG9mIG5lZWQgdG8gY2FwdHVyZSB0aGUgYWN0aW9uIGF0IHRoZSBrZXlkb3duIHBoYXNlLlxuXG5cbiAgZnVuY3Rpb24gY2hlY2tUYWIoZSkge1xuICAgIHVwZGF0ZVRhYmJhYmxlTm9kZXMoKTtcblxuICAgIGlmIChlLnNoaWZ0S2V5ICYmIGUudGFyZ2V0ID09PSBzdGF0ZS5maXJzdFRhYmJhYmxlTm9kZSkge1xuICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgdHJ5Rm9jdXMoc3RhdGUubGFzdFRhYmJhYmxlTm9kZSk7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgaWYgKCFlLnNoaWZ0S2V5ICYmIGUudGFyZ2V0ID09PSBzdGF0ZS5sYXN0VGFiYmFibGVOb2RlKSB7XG4gICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICB0cnlGb2N1cyhzdGF0ZS5maXJzdFRhYmJhYmxlTm9kZSk7XG4gICAgICByZXR1cm47XG4gICAgfVxuICB9XG5cbiAgZnVuY3Rpb24gY2hlY2tDbGljayhlKSB7XG4gICAgaWYgKGNvbmZpZy5jbGlja091dHNpZGVEZWFjdGl2YXRlcykgcmV0dXJuO1xuICAgIGlmIChjb250YWluZXIuY29udGFpbnMoZS50YXJnZXQpKSByZXR1cm47XG5cbiAgICBpZiAoY29uZmlnLmFsbG93T3V0c2lkZUNsaWNrICYmICh0eXBlb2YgY29uZmlnLmFsbG93T3V0c2lkZUNsaWNrID09PSAnYm9vbGVhbicgPyBjb25maWcuYWxsb3dPdXRzaWRlQ2xpY2sgOiBjb25maWcuYWxsb3dPdXRzaWRlQ2xpY2soZSkpKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgIGUuc3RvcEltbWVkaWF0ZVByb3BhZ2F0aW9uKCk7XG4gIH1cblxuICBmdW5jdGlvbiB1cGRhdGVUYWJiYWJsZU5vZGVzKCkge1xuICAgIHZhciB0YWJiYWJsZU5vZGVzID0gdGFiYmFibGUoY29udGFpbmVyKTtcbiAgICBzdGF0ZS5maXJzdFRhYmJhYmxlTm9kZSA9IHRhYmJhYmxlTm9kZXNbMF0gfHwgZ2V0SW5pdGlhbEZvY3VzTm9kZSgpO1xuICAgIHN0YXRlLmxhc3RUYWJiYWJsZU5vZGUgPSB0YWJiYWJsZU5vZGVzW3RhYmJhYmxlTm9kZXMubGVuZ3RoIC0gMV0gfHwgZ2V0SW5pdGlhbEZvY3VzTm9kZSgpO1xuICB9XG5cbiAgZnVuY3Rpb24gdHJ5Rm9jdXMobm9kZSkge1xuICAgIGlmIChub2RlID09PSBkb2MuYWN0aXZlRWxlbWVudCkgcmV0dXJuO1xuXG4gICAgaWYgKCFub2RlIHx8ICFub2RlLmZvY3VzKSB7XG4gICAgICB0cnlGb2N1cyhnZXRJbml0aWFsRm9jdXNOb2RlKCkpO1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIG5vZGUuZm9jdXMoe1xuICAgICAgcHJldmVudFNjcm9sbDogISFjb25maWcucHJldmVudFNjcm9sbFxuICAgIH0pO1xuICAgIHN0YXRlLm1vc3RSZWNlbnRseUZvY3VzZWROb2RlID0gbm9kZTtcblxuICAgIGlmIChpc1NlbGVjdGFibGVJbnB1dChub2RlKSkge1xuICAgICAgbm9kZS5zZWxlY3QoKTtcbiAgICB9XG4gIH1cbn1cblxuZnVuY3Rpb24gaXNTZWxlY3RhYmxlSW5wdXQobm9kZSkge1xuICByZXR1cm4gbm9kZS50YWdOYW1lICYmIG5vZGUudGFnTmFtZS50b0xvd2VyQ2FzZSgpID09PSAnaW5wdXQnICYmIHR5cGVvZiBub2RlLnNlbGVjdCA9PT0gJ2Z1bmN0aW9uJztcbn1cblxuZnVuY3Rpb24gaXNFc2NhcGVFdmVudChlKSB7XG4gIHJldHVybiBlLmtleSA9PT0gJ0VzY2FwZScgfHwgZS5rZXkgPT09ICdFc2MnIHx8IGUua2V5Q29kZSA9PT0gMjc7XG59XG5cbmZ1bmN0aW9uIGlzVGFiRXZlbnQoZSkge1xuICByZXR1cm4gZS5rZXkgPT09ICdUYWInIHx8IGUua2V5Q29kZSA9PT0gOTtcbn1cblxuZnVuY3Rpb24gZGVsYXkoZm4pIHtcbiAgcmV0dXJuIHNldFRpbWVvdXQoZm4sIDApO1xufVxuXG5leHBvcnQgeyBjcmVhdGVGb2N1c1RyYXAgfTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWZvY3VzLXRyYXAuZXNtLmpzLm1hcFxuIiwiZXhwb3J0IGNvbnN0IHNldEZvY3VzT25GaXJzdERlc2NlbmRhbnQgPSAoZWxlbWVudCkgPT4ge1xuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgZWxlbWVudC5jaGlsZE5vZGVzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIGNvbnN0IGNoaWxkID0gZWxlbWVudC5jaGlsZE5vZGVzW2ldO1xuICAgICAgICBpZiAodHJ5VG9TZXRGb2N1cyhjaGlsZCkgfHwgc2V0Rm9jdXNPbkZpcnN0RGVzY2VuZGFudChjaGlsZCkpIHtcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICB9XG4gICAgfVxuICAgIHJldHVybiBmYWxzZTtcbn07XG5cbmV4cG9ydCBjb25zdCBzZXRGb2N1c09uTGFzdERlc2NlbmRhbnQgPSAoZWxlbWVudCkgPT4ge1xuICAgIGZvciAobGV0IGkgPSBlbGVtZW50LmNoaWxkTm9kZXMubGVuZ3RoIC0gMTsgaSA+PSAwOyBpLS0pIHtcbiAgICAgICAgbGV0IGNoaWxkID0gZWxlbWVudC5jaGlsZE5vZGVzW2ldO1xuICAgICAgICBpZiAodHJ5VG9TZXRGb2N1cyhjaGlsZCkgfHwgc2V0Rm9jdXNPbkxhc3REZXNjZW5kYW50KGNoaWxkKSkge1xuICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIGZhbHNlO1xufTtcblxuZXhwb3J0IGNvbnN0IHRyeVRvU2V0Rm9jdXMgPSBmdW5jdGlvbiAoZWxlbWVudCkge1xuICAgIGlmICghaXNGb2N1c2FibGUoZWxlbWVudCkpIHtcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cblxuICAgIHRyeSB7XG4gICAgICAgIGVsZW1lbnQuZm9jdXMoKTtcbiAgICB9IGNhdGNoIChlKSB7fVxuICAgIHJldHVybiBkb2N1bWVudC5hY3RpdmVFbGVtZW50ID09PSBlbGVtZW50O1xufTtcblxuZXhwb3J0IGNvbnN0IGlzRm9jdXNhYmxlID0gZnVuY3Rpb24gKGVsZW1lbnQpIHtcbiAgICBpZiAoZWxlbWVudC50YWJJbmRleCA+IDAgfHwgKGVsZW1lbnQudGFiSW5kZXggPT09IDAgJiYgZWxlbWVudC5nZXRBdHRyaWJ1dGUoJ3RhYkluZGV4JykgIT09IG51bGwpKSB7XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cblxuICAgIGlmIChlbGVtZW50LmRpc2FibGVkKSB7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG5cbiAgICBzd2l0Y2ggKGVsZW1lbnQubm9kZU5hbWUpIHtcbiAgICAgICAgY2FzZSAnQSc6XG4gICAgICAgICAgICByZXR1cm4gISFlbGVtZW50LmhyZWYgJiYgZWxlbWVudC5yZWwgIT0gJ2lnbm9yZSc7XG4gICAgICAgIGNhc2UgJ0lOUFVUJzpcbiAgICAgICAgICAgIHJldHVybiBlbGVtZW50LnR5cGUgIT0gJ2hpZGRlbicgJiYgZWxlbWVudC50eXBlICE9ICdmaWxlJztcbiAgICAgICAgY2FzZSAnQlVUVE9OJzpcbiAgICAgICAgY2FzZSAnU0VMRUNUJzpcbiAgICAgICAgY2FzZSAnVEVYVEFSRUEnOlxuICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxufTtcbiIsImltcG9ydCB7IGNyZWF0ZUZvY3VzVHJhcCB9IGZyb20gJ2ZvY3VzLXRyYXAnO1xuaW1wb3J0IHsgc2V0Rm9jdXNPbkZpcnN0RGVzY2VuZGFudCB9IGZyb20gJy4vdXRpbHMvZm9jdXMnO1xuaW1wb3J0IHsgS0VZX0NPREUgfSBmcm9tICcuL3V0aWxzL2tleXMnO1xuXG5jb25zdCBCT0RZX09QRU5fQ0xBU1MgPSAnaGFzLW1vZGFsJztcbmNvbnN0IE1PREFMX09QRU5fQ0xBU1MgPSAnbW9kYWwtLW9wZW4nO1xuY29uc3QgREFUQV9NT0RBTF9UT0dHTEUgPSAnZGF0YS10b2dnbGUtbW9kYWwnO1xuY29uc3QgREFUQV9NT0RBTF9DTE9TRSA9ICdkYXRhLWNsb3NlLW1vZGFsJztcblxuY29uc3QgRVZFTlRfQ0xPU0UgPSAnbW9kYWwuY2xvc2UnO1xuY29uc3QgRVZFTlRfT1BFTiA9ICdtb2RhbC5vcGVuJztcblxubGV0IGFjdGl2ZU1vZGFsID0gbnVsbDtcblxuLy8gdGhpcy5ldmVudENsb3NlID0gbmV3IEV2ZW50KEVWRU5UX0NMT1NFKTtcbi8vIHRoaXMuZXZlbnRPcGVuID0gbmV3IEV2ZW50KEVWRU5UX09QRU4pO1xuXG5leHBvcnQgY2xhc3MgTW9kYWwge1xuICAgIGNvbnN0cnVjdG9yKG1vZGFsSUQsIHRvZ2dsZXMpIHtcbiAgICAgICAgdGhpcy5tb2RhbCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKG1vZGFsSUQpO1xuICAgICAgICB0aGlzLmZvY3VzVHJhcCA9IGNyZWF0ZUZvY3VzVHJhcCh0aGlzLm1vZGFsKTtcblxuICAgICAgICBpZiAodG9nZ2xlcyAmJiB0b2dnbGVzLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgIHRoaXMuaW5pdFRvZ2dsZXModG9nZ2xlcyk7XG4gICAgICAgIH1cblxuICAgICAgICB0aGlzLmV2ZW50Q2xvc2UgPSBuZXcgRXZlbnQoRVZFTlRfQ0xPU0UpO1xuICAgICAgICB0aGlzLmV2ZW50T3BlbiA9IG5ldyBFdmVudChFVkVOVF9PUEVOKTtcbiAgICB9XG5cbiAgICBpbml0VG9nZ2xlcyh0b2dnbGVzKSB7XG4gICAgICAgIFsuLi50b2dnbGVzXS5maWx0ZXIoQm9vbGVhbikuZm9yRWFjaCgodG9nZ2xlKSA9PiB7XG4gICAgICAgICAgICB0b2dnbGUuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoZXZlbnQpID0+IHRoaXMuc2hvd01vZGFsKGV2ZW50KSk7XG4gICAgICAgIH0pO1xuICAgIH1cblxuICAgIHNob3dNb2RhbChldmVudCkge1xuICAgICAgICBhY3RpdmVNb2RhbCA9IHRoaXM7XG4gICAgICAgIHRoaXMuYWN0aXZlRWxlbWVudCA9IGRvY3VtZW50LmFjdGl2ZUVsZW1lbnQ7XG4gICAgICAgIHRoaXMubW9kYWwuY2xhc3NMaXN0LmFkZChNT0RBTF9PUEVOX0NMQVNTKTtcbiAgICAgICAgZG9jdW1lbnQuYm9keS5jbGFzc0xpc3QuYWRkKEJPRFlfT1BFTl9DTEFTUyk7XG4gICAgICAgIHNldEZvY3VzT25GaXJzdERlc2NlbmRhbnQodGhpcy5tb2RhbCk7XG4gICAgICAgIHRoaXMuZm9jdXNUcmFwLmFjdGl2YXRlKCk7XG4gICAgICAgIHRoaXMuaGlkZUFsbENvbnRlbnRGb3JTY3JlZW5SZWFkZXJzKCk7XG4gICAgICAgIHRoaXMuYWRkRXZlbnRMaXN0ZW5lcnMoKTtcbiAgICAgICAgdGhpcy5tb2RhbC5kaXNwYXRjaEV2ZW50KHRoaXMuZXZlbnRPcGVuKTtcbiAgICB9XG5cbiAgICBjbG9zZU1vZGFsKGV2ZW50KSB7XG4gICAgICAgIGFjdGl2ZU1vZGFsLnJlbW92ZUV2ZW50TGlzdGVuZXJzKCk7XG4gICAgICAgIGRvY3VtZW50LmJvZHkuY2xhc3NMaXN0LnJlbW92ZShCT0RZX09QRU5fQ0xBU1MpO1xuICAgICAgICBhY3RpdmVNb2RhbC5tb2RhbC5jbGFzc0xpc3QucmVtb3ZlKE1PREFMX09QRU5fQ0xBU1MpO1xuICAgICAgICBhY3RpdmVNb2RhbC5mb2N1c1RyYXAuZGVhY3RpdmF0ZSgpO1xuICAgICAgICB0aGlzLnNob3dBbGxDb250ZW50Rm9yU2NyZWVuUmVhZGVycygpO1xuICAgICAgICBpZiAoYWN0aXZlTW9kYWwuYWN0aXZlRWxlbWVudCAmJiBhY3RpdmVNb2RhbC5hY3RpdmVFbGVtZW50LmZvY3VzKSB7XG4gICAgICAgICAgICBhY3RpdmVNb2RhbC5hY3RpdmVFbGVtZW50LmZvY3VzKCk7XG4gICAgICAgIH1cbiAgICAgICAgYWN0aXZlTW9kYWwubW9kYWwuZGlzcGF0Y2hFdmVudChhY3RpdmVNb2RhbC5ldmVudENsb3NlKTtcbiAgICAgICAgYWN0aXZlTW9kYWwgPSBudWxsO1xuICAgIH1cblxuICAgIGFkZEV2ZW50TGlzdGVuZXJzKCkge1xuICAgICAgICB0aGlzLm1vZGFsLmFkZEV2ZW50TGlzdGVuZXIoJ3RvdWNoc3RhcnQnLCB0aGlzLmhhbmRsZU1vZGFsQ2xpY2spO1xuICAgICAgICB0aGlzLm1vZGFsLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgdGhpcy5oYW5kbGVNb2RhbENsaWNrKTtcbiAgICAgICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcigna2V5dXAnLCB0aGlzLmhhbmRsZURvY3VtZW50S2V5VXBFdmVudCk7XG4gICAgfVxuXG4gICAgcmVtb3ZlRXZlbnRMaXN0ZW5lcnMoKSB7XG4gICAgICAgIHRoaXMubW9kYWwucmVtb3ZlRXZlbnRMaXN0ZW5lcigndG91Y2hzdGFydCcsIHRoaXMuaGFuZGxlTW9kYWxDbGljayk7XG4gICAgICAgIHRoaXMubW9kYWwucmVtb3ZlRXZlbnRMaXN0ZW5lcignY2xpY2snLCB0aGlzLmhhbmRsZU1vZGFsQ2xpY2spO1xuICAgICAgICBkb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKCdrZXlkb3duJywgdGhpcy5oYW5kbGVEb2N1bWVudEtleVVwRXZlbnQpO1xuICAgIH1cblxuICAgIGhhbmRsZURvY3VtZW50S2V5VXBFdmVudChldmVudCkge1xuICAgICAgICBpZiAoZXZlbnQua2V5Q29kZSA9PT0gS0VZX0NPREUuRVNDKSB7XG4gICAgICAgICAgICBldmVudC5zdG9wUHJvcGFnYXRpb24oKTtcbiAgICAgICAgICAgIGFjdGl2ZU1vZGFsLmNsb3NlTW9kYWwoZXZlbnQpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgaGFuZGxlTW9kYWxDbGljayhldmVudCkge1xuICAgICAgICBjb25zdCBjbG9zZUF0dHIgPSBgWyR7REFUQV9NT0RBTF9DTE9TRX1dYDtcbiAgICAgICAgaWYgKGV2ZW50LnRhcmdldC5oYXNBdHRyaWJ1dGUoY2xvc2VBdHRyKSB8fCBldmVudC50YXJnZXQuY2xvc2VzdChjbG9zZUF0dHIpKSB7XG4gICAgICAgICAgICBhY3RpdmVNb2RhbC5jbG9zZU1vZGFsKGV2ZW50KTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIGhpZGVBbGxDb250ZW50Rm9yU2NyZWVuUmVhZGVycygpIHtcbiAgICAgICAgWy4uLmRvY3VtZW50LmJvZHkuY2hpbGRyZW5dLmZvckVhY2goKGNoaWxkKSA9PiB7XG4gICAgICAgICAgICBpZiAoY2hpbGQgIT09IHRoaXMubW9kYWwpIHtcbiAgICAgICAgICAgICAgICBjaGlsZC5zZXRBdHRyaWJ1dGUoJ2FyaWEtaGlkZGVuJywgdHJ1ZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgIH1cblxuICAgIHNob3dBbGxDb250ZW50Rm9yU2NyZWVuUmVhZGVycygpIHtcbiAgICAgICAgWy4uLmRvY3VtZW50LmJvZHkuY2hpbGRyZW5dLmZvckVhY2goKGNoaWxkKSA9PiB7XG4gICAgICAgICAgICBpZiAoY2hpbGQgIT09IHRoaXMubW9kYWwpIHtcbiAgICAgICAgICAgICAgICBjaGlsZC5yZW1vdmVBdHRyaWJ1dGUoJ2FyaWEtaGlkZGVuJyk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgIH1cbn1cblxuY29uc3QgZ2VuZXJhdGVNb2RhbHNUb2dnbGVzTWFwID0gKHRvZ2dsZXMpID0+IHtcbiAgICBjb25zdCBtYXAgPSBbXTtcblxuICAgIHRvZ2dsZXMuZm9yRWFjaCgodG9nZ2xlKSA9PiB7XG4gICAgICAgIGNvbnN0IG1vZGFsSUQgPSB0b2dnbGUuZ2V0QXR0cmlidXRlKERBVEFfTU9EQUxfVE9HR0xFKTtcbiAgICAgICAgaWYgKG1hcFttb2RhbElEXSA9PT0gdW5kZWZpbmVkKSBtYXBbbW9kYWxJRF0gPSBbXTtcbiAgICAgICAgbWFwW21vZGFsSURdLnB1c2godG9nZ2xlKTtcbiAgICB9KTtcblxuICAgIHJldHVybiBtYXA7XG59O1xuXG5leHBvcnQgY29uc3QgaW5pdE1vZGFscyA9ICgpID0+IHtcbiAgICBjb25zdCB0b2dnbGVzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChgWyR7REFUQV9NT0RBTF9UT0dHTEV9XWApO1xuICAgIGNvbnN0IG1vZGFsc1RvZ2dsZXNNYXAgPSBnZW5lcmF0ZU1vZGFsc1RvZ2dsZXNNYXAodG9nZ2xlcyk7XG5cbiAgICBPYmplY3Qua2V5cyhtb2RhbHNUb2dnbGVzTWFwKS5mb3JFYWNoKChtb2RhbElEKSA9PiB7XG4gICAgICAgIGNvbnN0IHRvZ2dsZXMgPSBtb2RhbHNUb2dnbGVzTWFwW21vZGFsSURdO1xuICAgICAgICBuZXcgTW9kYWwobW9kYWxJRCwgdG9nZ2xlcyk7XG4gICAgfSk7XG59O1xuIiwiY29uc3QgU0VMRUNUT1JfSU5QVVRfV1JBUFBFUiA9ICcuZm9ybS1maWVsZCc7XG5jb25zdCBTRUxFQ1RPUl9JTlBVVCA9ICcuZm9ybS1maWVsZF9faW5wdXQnO1xuY29uc3QgU0VMRUNUT1JfRVJST1IgPSAnLmZvcm0tZmllbGRfX2Vycm9yJztcbmNvbnN0IENMQVNTX0xBQkVMX0FCT1ZFID0gJ2Zvcm0tZmllbGRfX2xhYmVsLS1hYm92ZSc7XG5jb25zdCBDTEFTU19JTlZBTElEID0gJ2Zvcm0tZmllbGQtLWludmFsaWQnO1xuY29uc3QgSURfRVJST1JfQUxFUlQgPSAnbG9naW5Gb3JtRXJvcnInO1xuXG5mdW5jdGlvbiBoYW5kbGVJbnB1dENoYW5nZUV2ZW50KGV2ZW50KSB7XG4gICAgY29uc3QgdGFyZ2V0ID0gZXZlbnQudGFyZ2V0O1xuICAgIGNoYW5nZUZsb2F0TGFiZWxTdGF0ZSh0YXJnZXQpO1xufVxuXG5mdW5jdGlvbiBjaGFuZ2VGbG9hdExhYmVsU3RhdGUoaW5wdXQpIHtcbiAgICBjb25zdCBsYWJlbCA9IGlucHV0LmxhYmVscyA/IGlucHV0LmxhYmVsc1swXSA6IG51bGw7XG4gICAgaWYgKGxhYmVsKSB7XG4gICAgICAgIGNvbnN0IGlzTGFiZWxBYm92ZSA9IGlucHV0LnZhbHVlIHx8IGlucHV0ID09PSBkb2N1bWVudC5hY3RpdmVFbGVtZW50O1xuICAgICAgICBpc0xhYmVsQWJvdmUgPyBsYWJlbC5jbGFzc0xpc3QuYWRkKENMQVNTX0xBQkVMX0FCT1ZFKSA6IGxhYmVsLmNsYXNzTGlzdC5yZW1vdmUoQ0xBU1NfTEFCRUxfQUJPVkUpO1xuICAgIH1cbn1cblxuZnVuY3Rpb24gdmFsaWRhdGVSZXF1aXJlZElucHV0KGlucHV0KSB7XG4gICAgaWYgKCFpbnB1dC52YWx1ZSkge1xuICAgICAgICBzZXRJbnZhbGlkU3RhdGUoaW5wdXQpO1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuXG4gICAgcmV0dXJuIHRydWU7XG59XG5cbmZ1bmN0aW9uIHNldEludmFsaWRTdGF0ZShpbnB1dCkge1xuICAgIGNvbnN0IHdyYXBwZXIgPSBpbnB1dC5jbG9zZXN0KFNFTEVDVE9SX0lOUFVUX1dSQVBQRVIpO1xuICAgIGNvbnN0IGVycm9yID0gd3JhcHBlci5xdWVyeVNlbGVjdG9yQWxsKFNFTEVDVE9SX0VSUk9SKVswXTtcbiAgICB3cmFwcGVyLmNsYXNzTGlzdC5hZGQoQ0xBU1NfSU5WQUxJRCk7XG4gICAgZXJyb3IucmVtb3ZlQXR0cmlidXRlKCdoaWRkZW4nKTtcbiAgICBpbnB1dC5zZXRBdHRyaWJ1dGUoJ2FyaWEtZGVzY3JpYmVkYnknLCBlcnJvci5pZCk7XG4gICAgaW5wdXQuc2V0QXR0cmlidXRlKCdhcmlhLWludmFsaWQnLCB0cnVlKTtcbn1cblxuZnVuY3Rpb24gcmVzZXRJbnZhbGlkU3RhdGUoaW5wdXQpIHtcbiAgICBjb25zdCB3cmFwcGVyID0gaW5wdXQuY2xvc2VzdChTRUxFQ1RPUl9JTlBVVF9XUkFQUEVSKTtcbiAgICBjb25zdCBlcnJvciA9IHdyYXBwZXIucXVlcnlTZWxlY3RvckFsbChTRUxFQ1RPUl9FUlJPUilbMF07XG4gICAgd3JhcHBlci5jbGFzc0xpc3QucmVtb3ZlKENMQVNTX0lOVkFMSUQpO1xuICAgIGVycm9yLnNldEF0dHJpYnV0ZSgnaGlkZGVuJywgJ2hpZGRlbicpO1xuICAgIGlucHV0LnJlbW92ZUF0dHJpYnV0ZSgnYXJpYS1kZXNjcmliZWRieScpO1xuICAgIGlucHV0LnJlbW92ZUF0dHJpYnV0ZSgnYXJpYS1pbnZhbGlkJyk7XG59XG5cbmZ1bmN0aW9uIGluaXRJbnB1dHMoKSB7XG4gICAgY29uc3QgaW5wdXRzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChTRUxFQ1RPUl9JTlBVVCk7XG4gICAgWy4uLmlucHV0c10uZm9yRWFjaCgoaW5wdXQpID0+IHtcbiAgICAgICAgaW5wdXQuYWRkRXZlbnRMaXN0ZW5lcignY2hhbmdlJywgaGFuZGxlSW5wdXRDaGFuZ2VFdmVudCk7XG4gICAgfSk7XG59XG5cbmZ1bmN0aW9uIGluaXRMb2dpbkZvcm0oKSB7XG4gICAgY29uc3QgbG9naW5Nb2RhbCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdsb2dpbk1vZGFsJyk7XG4gICAgY29uc3QgbG9naW5Gb3JtID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2xvZ2luRm9ybScpO1xuICAgIGNvbnN0IGlucHV0cyA9IGxvZ2luRm9ybS5xdWVyeVNlbGVjdG9yQWxsKFNFTEVDVE9SX0lOUFVUKTtcblxuICAgIGZ1bmN0aW9uIGFkZEV2ZW50TGlzdGVuZXJzKCkge1xuICAgICAgICBsb2dpbk1vZGFsLmFkZEV2ZW50TGlzdGVuZXIoJ21vZGFsLmNsb3NlJywgKGUpID0+IHJlc2V0Rm9ybUludmFsaWRTdGF0ZSgpKTtcbiAgICAgICAgbG9naW5Gb3JtLmFkZEV2ZW50TGlzdGVuZXIoJ3N1Ym1pdCcsIHN1Ym1pdEZvcm0pO1xuXG4gICAgICAgIFsuLi5pbnB1dHNdLmZvckVhY2goKGlucHV0KSA9PiB7XG4gICAgICAgICAgICBpbnB1dC5hZGRFdmVudExpc3RlbmVyKCdrZXl1cCcsIChlKSA9PiB7XG4gICAgICAgICAgICAgICAgZS50YXJnZXQudmFsdWUgJiYgcmVzZXRJbnZhbGlkU3RhdGUoZS50YXJnZXQpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0pO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIHN1Ym1pdEZvcm0oZXZlbnQpIHtcbiAgICAgICAgcmVtb3ZlRXJyb3JBbGVydCgpO1xuICAgICAgICBjb25zdCBpc0Zvcm1WYWxpZCA9IHZhbGlkYXRlRm9ybSgpO1xuXG4gICAgICAgIGlmIChpc0Zvcm1WYWxpZCkge1xuICAgICAgICAgICAgbG9naW5Nb2RhbC5xdWVyeVNlbGVjdG9yKCdbZGF0YS1jbG9zZS1tb2RhbF0nKS5jbGljaygpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgICAgIGNvbnN0IGludmFsaWRGaWVsZHMgPSBsb2dpbkZvcm0ucXVlcnlTZWxlY3RvckFsbCgnW2FyaWEtaW52YWxpZF0nKTtcbiAgICAgICAgICAgIGNyZWF0ZUVycm9yQWxlcnQoaW52YWxpZEZpZWxkcy5sZW5ndGgpO1xuICAgICAgICAgICAgLy8gaW52YWxpZEZpZWxkc1swXS5mb2N1cygpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gdmFsaWRhdGVGb3JtKCkge1xuICAgICAgICBsZXQgaXNGb3JtVmFsaWQgPSB0cnVlO1xuICAgICAgICBbLi4uaW5wdXRzXS5mb3JFYWNoKChpbnB1dCkgPT4ge1xuICAgICAgICAgICAgY29uc3QgaXNWYWxpZCA9IHZhbGlkYXRlUmVxdWlyZWRJbnB1dChpbnB1dCk7XG4gICAgICAgICAgICAhaXNWYWxpZCAmJiAoaXNGb3JtVmFsaWQgPSBmYWxzZSk7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIHJldHVybiBpc0Zvcm1WYWxpZDtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBjcmVhdGVFcnJvckFsZXJ0KG51bU9mSW52YWxpZEZpZWxkcykge1xuICAgICAgICBpZiAoIWRvY3VtZW50LmdldEVsZW1lbnRCeUlkKElEX0VSUk9SX0FMRVJUKSkge1xuICAgICAgICAgICAgY29uc3QgYWxlcnQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgICAgICAgICAgIGFsZXJ0LnNldEF0dHJpYnV0ZSgnaWQnLCBJRF9FUlJPUl9BTEVSVCk7XG4gICAgICAgICAgICBhbGVydC5zZXRBdHRyaWJ1dGUoJ3JvbGUnLCAnYWxlcnQnKTtcbiAgICAgICAgICAgIGFsZXJ0LnNldEF0dHJpYnV0ZSgndGFiSW5kZXgnLCAnLTEnKTtcbiAgICAgICAgICAgIGFsZXJ0LmNsYXNzTGlzdC5hZGQoJ3Zpc3VhbGx5LWhpZGRlbicpO1xuICAgICAgICAgICAgYWxlcnQuaW5uZXJIVE1MID0gYNCk0L7RgNC80LAg0L3QtSDQsdGL0LvQsCDQvtGC0L/RgNCw0LLQu9C10L3QsC4g0J3QsNC50LTQtdC90L4gJHtudW1PZkludmFsaWRGaWVsZHN9INC+0YjQuNCx0L7Qui5gO1xuICAgICAgICAgICAgbG9naW5Gb3JtLmFwcGVuZENoaWxkKGFsZXJ0KTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIGZ1bmN0aW9uIHJlbW92ZUVycm9yQWxlcnQoKSB7XG4gICAgICAgIGNvbnN0IGFsZXJ0ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoSURfRVJST1JfQUxFUlQpO1xuICAgICAgICBpZiAoYWxlcnQpIHtcbiAgICAgICAgICAgIGFsZXJ0LnJlbW92ZSgpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gcmVzZXRGb3JtSW52YWxpZFN0YXRlKCkge1xuICAgICAgICBbLi4uaW5wdXRzXS5mb3JFYWNoKChpbnB1dCkgPT4ge1xuICAgICAgICAgICAgcmVzZXRJbnZhbGlkU3RhdGUoaW5wdXQpO1xuICAgICAgICB9KTtcbiAgICAgICAgcmVtb3ZlRXJyb3JBbGVydCgpO1xuICAgIH1cblxuICAgIGFkZEV2ZW50TGlzdGVuZXJzKCk7XG59XG5cbmV4cG9ydCBjb25zdCBpbml0Rm9ybXMgPSAoKSA9PiB7XG4gICAgaW5pdElucHV0cygpO1xuICAgIGluaXRMb2dpbkZvcm0oKTtcbn07XG4iLCJpbXBvcnQgeyBpbml0VGFicyB9IGZyb20gJy4vdGFicyc7XG5pbXBvcnQgeyBpbml0TW9kYWxzIH0gZnJvbSAnLi9tb2RhbCc7XG5pbXBvcnQgeyBpbml0Rm9ybXMgfSBmcm9tICcuL2Zvcm1zJztcblxuY2xhc3MgQXBwIHtcbiAgICBjb25zdHJ1Y3RvcigpIHt9XG4gICAgaW5pdCgpIHtcbiAgICAgICAgaW5pdE1vZGFscygpO1xuICAgICAgICBpbml0VGFicygpO1xuICAgICAgICBpbml0Rm9ybXMoKTtcbiAgICB9XG59XG5cbmNvbnN0IGFwcCA9IG5ldyBBcHAoKTtcbmRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ0RPTUNvbnRlbnRMb2FkZWQnLCAoKSA9PiBhcHAuaW5pdCgpKTtcbiIsImltcG9ydCAnLi9zdHlsZXMvaW5kZXguc2Nzcyc7XG5pbXBvcnQgJy4vc2NyaXB0cy9hcHAnO1xuIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///0\n")}]);